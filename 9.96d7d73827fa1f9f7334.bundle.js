(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1532:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(29),__webpack_require__(24),__webpack_require__(31);var prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__),_components__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2),_GoogleShoppingSettingsContext__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(88),ComponentChart=function(props){var state=Object(react__WEBPACK_IMPORTED_MODULE_4__.useContext)(_GoogleShoppingSettingsContext__WEBPACK_IMPORTED_MODULE_6__.b).state,labels=props.labels,values=props.values;return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_5__.h,{data:state,options:{chart:{type:"line",width:null,height:240},title:{text:""},series:[{data:values}],yAxis:{title:{text:null},allowDecimals:!1},xAxis:{categories:labels},legend:{enabled:!1}}})};ComponentChart.propTypes={labels:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.array,values:prop_types__WEBPACK_IMPORTED_MODULE_3___default.a.array},__webpack_exports__.a=ComponentChart,ComponentChart.__docgenInfo={description:"",methods:[],displayName:"ComponentChart",props:{labels:{type:{name:"array"},required:!1,description:""},values:{type:{name:"array"},required:!1,description:""}}},ComponentChart.__docgenInfo={description:"",methods:[],displayName:"ComponentChart",props:{labels:{type:{name:"array"},required:!1,description:""},values:{type:{name:"array"},required:!1,description:""}}},ComponentChart.__docgenInfo={description:"",methods:[],displayName:"ComponentChart",props:{labels:{type:{name:"array"},required:!1,description:""},values:{type:{name:"array"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentChart.js"]={name:"ComponentChart",docgenInfo:ComponentChart.__docgenInfo,path:"src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentChart.js"})},1542:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(70),__webpack_require__(29),__webpack_require__(20),__webpack_require__(24),__webpack_require__(31);var taggedTemplateLiteral=__webpack_require__(18),taggedTemplateLiteral_default=__webpack_require__.n(taggedTemplateLiteral),slicedToArray=__webpack_require__(5),slicedToArray_default=__webpack_require__.n(slicedToArray),react=__webpack_require__(0),react_default=__webpack_require__.n(react),styled_components_browser_esm=__webpack_require__(19),components=__webpack_require__(2),hooks=__webpack_require__(15),GoogleShoppingSettingsContext=__webpack_require__(88),ComponentChart=__webpack_require__(1532),prop_types=(__webpack_require__(26),__webpack_require__(1)),prop_types_default=__webpack_require__.n(prop_types),ComponentMenu=function(props){var setupCampaigns=Object(react.useContext)(GoogleShoppingSettingsContext.c).setupCampaigns,handleModalActive=Object(react.useContext)(GoogleShoppingSettingsContext.b).handleModalActive,actionOptions=setupCampaigns.actionOptions,dataSelected=props.data,handleEdit=props.handleEdit,status=dataSelected.status,handleClick=function(event,params){var action=params.action,id=dataSelected.id,campaignName=dataSelected.campaignName;"edit"===action?handleEdit(event,dataSelected):handleModalActive(id,campaignName,action)},checkStatus="active"===status?"enable":"pause",items=actionOptions.filter(function(item){return item.value!==checkStatus}).map(function(item,index){return react_default.a.createElement(components.V,{key:index,label:item.label,onClick:handleClick,onClickParam:{action:item.value}})});return react_default.a.createElement(components.U,{paddingTop:"2",paddingBottom:"2",marginBottom:"0",textAlign:"left"},items)};ComponentMenu.propTypes={data:prop_types_default.a.object,handleEdit:prop_types_default.a.func};var components_ComponentMenu=ComponentMenu;ComponentMenu.__docgenInfo={description:"",methods:[],displayName:"ComponentMenu",props:{data:{type:{name:"object"},required:!1,description:""},handleEdit:{type:{name:"func"},required:!1,description:""}}},ComponentMenu.__docgenInfo={description:"",methods:[],displayName:"ComponentMenu",props:{data:{type:{name:"object"},required:!1,description:""},handleEdit:{type:{name:"func"},required:!1,description:""}}},ComponentMenu.__docgenInfo={description:"",methods:[],displayName:"ComponentMenu",props:{data:{type:{name:"object"},required:!1,description:""},handleEdit:{type:{name:"func"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentMenu.js"]={name:"ComponentMenu",docgenInfo:ComponentMenu.__docgenInfo,path:"src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentMenu.js"});__webpack_require__(63),__webpack_require__(59);var ComponentSummary=function(props){var viewPortXl=Object(react.useContext)(GoogleShoppingSettingsContext.c).viewPortXl,data=props.data,labels=props.labels,dataMapped=Object.entries(data).map(function(_ref){var _ref2=slicedToArray_default()(_ref,2),key=_ref2[0],value=_ref2[1];return{label:labels.find(function(item){return item.value===key}).label,value:value}});return react_default.a.createElement(components.a,{data:dataMapped,layout:viewPortXl?"column":null})};ComponentSummary.propTypes={data:prop_types_default.a.object,labels:prop_types_default.a.array};var components_ComponentSummary=ComponentSummary;ComponentSummary.__docgenInfo={description:"",methods:[],displayName:"ComponentSummary",props:{data:{type:{name:"object"},required:!1,description:""},labels:{type:{name:"array"},required:!1,description:""}}},ComponentSummary.__docgenInfo={description:"",methods:[],displayName:"ComponentSummary",props:{data:{type:{name:"object"},required:!1,description:""},labels:{type:{name:"array"},required:!1,description:""}}},ComponentSummary.__docgenInfo={description:"",methods:[],displayName:"ComponentSummary",props:{data:{type:{name:"object"},required:!1,description:""},labels:{type:{name:"array"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentSummary.js"]={name:"ComponentSummary",docgenInfo:ComponentSummary.__docgenInfo,path:"src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentSummary.js"});var ComponentSwitch=function(props){var handleCampaignEnableTipInactive=Object(react.useContext)(GoogleShoppingSettingsContext.c).handleCampaignEnableTipInactive,handleModalActive=Object(react.useContext)(GoogleShoppingSettingsContext.b).handleModalActive,dataSelected=props.data,id=dataSelected.id,campaignName=dataSelected.campaignName,status=dataSelected.status;return react_default.a.createElement(components.H,{checked:"active"===status,action:function(){handleModalActive(id,campaignName,"active"===status?"pause":"enable"),handleCampaignEnableTipInactive()},labelLeft:"pause",labelRight:"enable",showLabels:!1,defer:!0,noFauxControlMargin:!0})};ComponentSwitch.propTypes={data:prop_types_default.a.object};var components_ComponentSwitch=ComponentSwitch;function _templateObject(){var data=taggedTemplateLiteral_default()(["\n    margin-bottom: 150px;\n"]);return _templateObject=function(){return data},data}ComponentSwitch.__docgenInfo={description:"",methods:[],displayName:"ComponentSwitch",props:{data:{type:{name:"object"},required:!1,description:""}}},ComponentSwitch.__docgenInfo={description:"",methods:[],displayName:"ComponentSwitch",props:{data:{type:{name:"object"},required:!1,description:""}}},ComponentSwitch.__docgenInfo={description:"",methods:[],displayName:"ComponentSwitch",props:{data:{type:{name:"object"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentSwitch.js"]={name:"ComponentSwitch",docgenInfo:ComponentSwitch.__docgenInfo,path:"src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentSwitch.js"});var ComponentList=function(){var _useContext=Object(react.useContext)(GoogleShoppingSettingsContext.c),setup=_useContext.setup,handleAsync=_useContext.handleAsync,async=_useContext.async,locale=_useContext.locale,campaignEnableTip=_useContext.campaignEnableTip,adsAccountConnected=_useContext.adsAccountConnected,apiCampaignAll=_useContext.apiCampaignAll,apiCampaignAllChart=_useContext.apiCampaignAllChart,handleModalErrorActive=_useContext.handleModalErrorActive,handleCampaignsActive=_useContext.handleCampaignsActive,handleCampaignEnableTipInactive=_useContext.handleCampaignEnableTipInactive,setupCampaigns=JSON.parse(setup).setupCampaigns,headersList=setupCampaigns.headersList,labelsPerformanceSummary=setupCampaigns.labelsPerformanceSummary,text=locale.text,_useContext2=Object(react.useContext)(GoogleShoppingSettingsContext.b),handleSelectedCampaign=_useContext2.handleSelectedCampaign,handleView=_useContext2.handleView,handleMenuInactive=_useContext2.handleMenuInactive,handleMenuActive=_useContext2.handleMenuActive,menuActive=_useContext2.menuActive,dayRangeAll=_useContext2.dayRangeAll,metricType=_useContext2.metricType,actionSuccess=_useContext2.actionSuccess,selectedCampaign=_useContext2.selectedCampaign,_useState=Object(react.useState)(),_useState2=slicedToArray_default()(_useState,2),data=_useState2[0],setData=_useState2[1],handleRequestSingle=Object(hooks.k)().handleRequestSingle,didMount=Object(hooks.a)().didMount,_useState3=Object(react.useState)([]),_useState4=slicedToArray_default()(_useState3,2),chartLabels=_useState4[0],setChartLabels=_useState4[1],_useState5=Object(react.useState)([]),_useState6=slicedToArray_default()(_useState5,2),chartValues=_useState6[0],setChartValues=_useState6[1],_useState7=Object(react.useState)({}),_useState8=slicedToArray_default()(_useState7,2),dataPerformanceSummary=_useState8[0],setDataPerformanceSummary=_useState8[1],handleRequestError=function(_ref){var errorMessage=_ref.errorMessage;handleAsync(!1),handleModalErrorActive(errorMessage)},handleRequestListSuccess=function(response){var _response$data=response.data,config=_response$data.config,results=_response$data.results,performanceSummary=config.performanceSummary,activeCampaigns=config.activeCampaigns,hasCampaign=results.length;setData(results),setDataPerformanceSummary(performanceSummary),handleAsync(!1),handleCampaignsActive(activeCampaigns),handleView(null,0<hasCampaign?"list":"start")},handleRequestList=function(){handleAsync(!0),handleRequestSingle({url:apiCampaignAll,method:"get",params:{dayRange:dayRangeAll},handleError:handleRequestError,handleSuccess:handleRequestListSuccess})},handleRequestChartSuccess=function(response){var _response$data2=response.data,labels=_response$data2.labels,values=_response$data2.values;setChartLabels(labels),setChartValues(values),handleAsync(!1)},handleRequestChart=function(){handleAsync(!0),handleRequestSingle({url:apiCampaignAllChart,method:"get",params:{dayRange:dayRangeAll,metricsType:metricType},handleError:handleRequestError,handleSuccess:handleRequestChartSuccess})},handleEdit=function(event,campaign){handleSelectedCampaign(campaign),handleMenuInactive(),handleView(event,"edit")},handleDetail=function(event,campaign){handleSelectedCampaign(campaign),handleMenuInactive(),handleView(event,"detail")};return Object(react.useEffect)(function(){!0===actionSuccess&&handleRequestList()},[actionSuccess]),Object(react.useEffect)(function(){adsAccountConnected&&(handleRequestList(),handleRequestChart())},[]),Object(react.useEffect)(function(){didMount&&(handleRequestList(),handleRequestChart())},[dayRangeAll]),react_default.a.createElement(react_default.a.Fragment,null,!data&&react_default.a.createElement(components.R,null),data&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(components.c,{paddingLeft:"4",paddingRight:"4",paddingTop:"4"},react_default.a.createElement(components_ComponentSummary,{labels:labelsPerformanceSummary,data:dataPerformanceSummary})),react_default.a.createElement(components.c,{paddingLeft:"4",paddingRight:"4",paddingTop:"4"},react_default.a.createElement(ComponentChart.a,{labels:chartLabels,values:chartValues})),react_default.a.createElement(components.c,{padding:"4"},react_default.a.createElement(components.eb,{header:""},react_default.a.createElement(TableStyled,{reference:"table-results",size:"default",showMargin:!0,borderRow:!0,scroll:!0,condensed:!0,borderColumn:!0,borderBottom:!0,center:!0},react_default.a.createElement(components.vb,{thead:!0},react_default.a.createElement(components.xb,null,headersList.map(function(item,index){return react_default.a.createElement(components.wb,{key:index,textAlign:["campaign"].includes(item.value)?null:"left",showLabel:!["status","actions"].includes(item.value)},item.label)}))),react_default.a.createElement(components.vb,null,data.map(function(item,index){var id=item.id,campaignName=item.campaignName,budgetAmount=item.budgetAmount,impressions=item.impressions,clicks=item.clicks,conversions=item.conversions,sales=item.sales,cost=item.cost,costConversions=item.costConversions,status=item.status,selected=selectedCampaign.id===id;return react_default.a.createElement(components.xb,{key:index,hover:!0},react_default.a.createElement(components.ub,{verticalAlign:"middle",textAlign:"center",small:!0},react_default.a.createElement(components.Cb,{label:text.google_campaigns_enable,position:"bottom",align:"right",fixed:!0,dismiss:!0,persist:campaignEnableTip,active:campaignEnableTip,show:campaignEnableTip&&selected&&"paused"===status,handleCallbackDismiss:handleCampaignEnableTipInactive},react_default.a.createElement(components_ComponentSwitch,{data:item}))),react_default.a.createElement(components.ub,{textAlign:"left",minWidth:"150px",block:!0},react_default.a.createElement(components.e,{label:campaignName,onClick:handleDetail,onClickParam:item,disabled:async,faux:!0})),react_default.a.createElement(components.ub,null,budgetAmount),react_default.a.createElement(components.ub,null,impressions),react_default.a.createElement(components.ub,null,clicks),react_default.a.createElement(components.ub,null,conversions),react_default.a.createElement(components.ub,null,sales),react_default.a.createElement(components.ub,null,cost),react_default.a.createElement(components.ub,null,costConversions),react_default.a.createElement(components.ub,{textAlign:"right",padding:"0",small:!0},react_default.a.createElement(components.m,{close:handleMenuInactive,active:menuActive[index],positionX:"right",offset:"-3px",menu:!0,trigger:react_default.a.createElement(components.e,{onClick:[handleMenuActive],onClickParam:{index:index},reference:"button-action-menu",disabled:async,padding:"2",reset:!0},react_default.a.createElement(components.M,{icon:"small-menu-dots",size:"small",color:"gray-300"}))},react_default.a.createElement(components_ComponentMenu,{data:item,handleEdit:handleEdit}))))})))))))},TableStyled=Object(styled_components_browser_esm.b)(components.tb)(_templateObject());__webpack_exports__.default=ComponentList;ComponentList.__docgenInfo={description:"",methods:[],displayName:"ComponentList"},ComponentList.__docgenInfo={description:"",methods:[],displayName:"ComponentList"},ComponentList.__docgenInfo={description:"",methods:[],displayName:"ComponentList"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentList.js"]={name:"ComponentList",docgenInfo:ComponentList.__docgenInfo,path:"src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentList.js"})}}]);
//# sourceMappingURL=9.96d7d73827fa1f9f7334.bundle.js.map