(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1658:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(23),__webpack_require__(132);var slicedToArray=__webpack_require__(3),slicedToArray_default=__webpack_require__.n(slicedToArray),react=__webpack_require__(0),react_default=__webpack_require__.n(react),Loader=__webpack_require__(404),Block=__webpack_require__(130),ModalConfirm=__webpack_require__(1585),useRequestSingle=__webpack_require__(1605),ComponentViewHeader=__webpack_require__(409),GoogleShoppingSettingsContext=__webpack_require__(98),prop_types=(__webpack_require__(29),__webpack_require__(26),__webpack_require__(31),__webpack_require__(1)),prop_types_default=__webpack_require__.n(prop_types),index_es=__webpack_require__(227),Flex=__webpack_require__(117),FlexItem=__webpack_require__(78),FormControlGroup=__webpack_require__(1640),FormSelect=__webpack_require__(1598),Button=__webpack_require__(58),ComponentActions=function(props){var showButton=props.showButton,_useContext=Object(react.useContext)(GoogleShoppingSettingsContext.c),setup=_useContext.setup,locale=_useContext.locale,async=_useContext.async,setupCampaigns=JSON.parse(setup).setupCampaigns,text=locale.text,dayRangeOptions=setupCampaigns.dayRangeOptions,_useContext2=Object(react.useContext)(GoogleShoppingSettingsContext.b),dayRangeAll=_useContext2.dayRangeAll,handleView=_useContext2.handleView,handleDayRangeAll=_useContext2.handleDayRangeAll,_useFormState=Object(index_es.a)({dayRange:dayRangeAll},{withIds:function(name){return name},onChange:function(e,stateValues,nextStateValues){handleDayRangeAll(nextStateValues.dayRange)}}),_useFormState2=slicedToArray_default()(_useFormState,2),formState=_useFormState2[0],select=_useFormState2[1].select;return Object(react.useEffect)(function(){handleDayRangeAll(formState.values.dayRange)},[formState.values.dayRange]),react_default.a.createElement(Flex.a,null,react_default.a.createElement(FlexItem.a,null,react_default.a.createElement(FormControlGroup.a,{label:"Range",id:"dayRange",showLabel:!1,padding:"0"},react_default.a.createElement(FormSelect.a,{id:select("dayRange").id,name:select("dayRange").name,value:select("dayRange").value,onChange:select("dayRange").onChange,options:dayRangeOptions,valueKey:"value",disabled:async,control:!0}))),react_default.a.createElement(FlexItem.a,{paddingLeft:"4",marginLeft:"auto"},showButton&&react_default.a.createElement(Button.a,{label:text.google_campaigns_create,onClick:handleView,onClickParam:"create",appearance:"primary",disabled:async})))};ComponentActions.defaultProps={showButton:!0},ComponentActions.propTypes={showButton:prop_types_default.a.bool};var components_ComponentActions=ComponentActions;ComponentActions.__docgenInfo={description:"",methods:[],displayName:"ComponentActions",props:{showButton:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""}}},ComponentActions.__docgenInfo={description:"",methods:[],displayName:"ComponentActions",props:{showButton:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""}}},ComponentActions.__docgenInfo={description:"",methods:[],displayName:"ComponentActions",props:{showButton:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentActions.js"]={name:"ComponentActions",docgenInfo:ComponentActions.__docgenInfo,path:"src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentActions.js"});__webpack_require__(21);var Text=__webpack_require__(33),Link=__webpack_require__(221),ComponentOverview=function(){var text=Object(react.useContext)(GoogleShoppingSettingsContext.c).locale.text;return react_default.a.createElement(Text.a,{marginBottom:"0"},"".concat(text.google_campaigns_overview_1," ").concat(text.learn_more_about," "),react_default.a.createElement(Link.a,{label:"".concat(text.google_campaigns_smart_shopping_campaigns,"."),href:"https://www.google.com/retail/solutions/shopping-campaigns",target:"_blank"}))},components_ComponentOverview=ComponentOverview;ComponentOverview.__docgenInfo={description:"",methods:[],displayName:"ComponentOverview"},ComponentOverview.__docgenInfo={description:"",methods:[],displayName:"ComponentOverview"},ComponentOverview.__docgenInfo={description:"",methods:[],displayName:"ComponentOverview"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentOverview.js"]={name:"ComponentOverview",docgenInfo:ComponentOverview.__docgenInfo,path:"src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentOverview.js"});var ComponentStart=Object(react.lazy)(function(){return __webpack_require__.e(15).then(__webpack_require__.bind(null,1653))}),ComponentDetail=Object(react.lazy)(function(){return Promise.all([__webpack_require__.e(1),__webpack_require__.e(9)]).then(__webpack_require__.bind(null,1654))}),ComponentEdit=Object(react.lazy)(function(){return __webpack_require__.e(14).then(__webpack_require__.bind(null,1660))}),ComponentList=Object(react.lazy)(function(){return Promise.all([__webpack_require__.e(1),__webpack_require__.e(10)]).then(__webpack_require__.bind(null,1656))}),ComponentSetupAds=Object(react.lazy)(function(){return __webpack_require__.e(11).then(__webpack_require__.bind(null,1655))}),ComponentSetupMerchant=Object(react.lazy)(function(){return __webpack_require__.e(0).then(__webpack_require__.bind(null,1652))}),ComponentConfiguring=Object(react.lazy)(function(){return __webpack_require__.e(2).then(__webpack_require__.bind(null,1646))}),ViewCampaigns=function(){var _useContext=Object(react.useContext)(GoogleShoppingSettingsContext.c),setup=_useContext.setup,apiCampaignPause=_useContext.apiCampaignPause,apiCampaignEnable=_useContext.apiCampaignEnable,apiCampaignDelete=_useContext.apiCampaignDelete,handleModalErrorActive=_useContext.handleModalErrorActive,handleNotificationActive=_useContext.handleNotificationActive,handleAsync=_useContext.handleAsync,merchantAccountConnected=_useContext.merchantAccountConnected,merchantAccountComplete=_useContext.merchantAccountComplete,adsAccountConnected=_useContext.adsAccountConnected,locale=_useContext.locale,async=_useContext.async,text=locale.text,buttons=locale.buttons,setupCampaigns=JSON.parse(setup).setupCampaigns,dayRangeAllDefault=setupCampaigns.dayRangeAllDefault,dayRangeOneDefault=setupCampaigns.dayRangeOneDefault,handleRequestSingle=Object(useRequestSingle.a)().handleRequestSingle,_useState=Object(react.useState)("list"),_useState2=slicedToArray_default()(_useState,2),view=_useState2[0],setView=_useState2[1],_useState3=Object(react.useState)([]),_useState4=slicedToArray_default()(_useState3,2),menuActive=_useState4[0],setMenuActive=_useState4[1],_useState5=Object(react.useState)(!1),_useState6=slicedToArray_default()(_useState5,2),modalActive=_useState6[0],setModalActive=_useState6[1],_useState7=Object(react.useState)(),_useState8=slicedToArray_default()(_useState7,2),modalMessage=_useState8[0],setModalMessage=_useState8[1],_useState9=Object(react.useState)(),_useState10=slicedToArray_default()(_useState9,2),modalActionType=_useState10[0],setModalActionType=_useState10[1],_useState11=Object(react.useState)(),_useState12=slicedToArray_default()(_useState11,2),modalActionLabelConfirm=_useState12[0],setModalActionLabelConfirm=_useState12[1],_useState13=Object(react.useState)(!1),_useState14=slicedToArray_default()(_useState13,2),actionSuccess=_useState14[0],setActionSuccess=_useState14[1],_useState15=Object(react.useState)(),_useState16=slicedToArray_default()(_useState15,2),menuIndex=_useState16[0],setMenuIndex=_useState16[1],_useState17=Object(react.useState)(),_useState18=slicedToArray_default()(_useState17,2),campaignId=_useState18[0],setCampaignId=_useState18[1],_useState19=Object(react.useState)(),_useState20=slicedToArray_default()(_useState19,2),campaignName=_useState20[0],setCampaignName=_useState20[1],_useState21=Object(react.useState)(dayRangeAllDefault),_useState22=slicedToArray_default()(_useState21,2),dayRangeAll=_useState22[0],setDayRangeAll=_useState22[1],_useState23=Object(react.useState)(dayRangeOneDefault),_useState24=slicedToArray_default()(_useState23,2),dayRangeOne=_useState24[0],setDayRangeOne=_useState24[1],_useState25=Object(react.useState)("0"),metricType=slicedToArray_default()(_useState25,1)[0],_useState27=Object(react.useState)(),_useState28=slicedToArray_default()(_useState27,2),actionType=_useState28[0],setActionType=_useState28[1],_useState29=Object(react.useState)({}),_useState30=slicedToArray_default()(_useState29,2),selectedCampaign=_useState30[0],setSelectedCampaign=_useState30[1],handleRequestError=function(_ref){var errorMessage=_ref.errorMessage;handleAsync(!1),handleModalErrorActive(errorMessage)},handleActionSuccess=function(response){var feedback=response.feedback,message={pause:text.google_campaigns_action_pause_success.format(campaignName),enable:text.google_campaigns_action_resume_success.format(campaignName),delete:text.google_campaigns_action_remove_success.format(campaignName)};handleAsync(!1),setModalActive(!1),feedback?(setActionSuccess(!1),handleNotificationActive(feedback.message,"warning")):(setActionSuccess(!0),handleNotificationActive(message[actionType],"success"))},handleMenuAction=function(){handleAsync(!0),setActionSuccess(!1),handleRequestSingle({url:{pause:apiCampaignPause,enable:apiCampaignEnable,delete:apiCampaignDelete}[actionType],method:"post",data:{campaignId:campaignId},handleError:handleRequestError,handleSuccess:handleActionSuccess})},handleMenuInactive=function(){0<=menuIndex&&(menuActive[menuIndex]=!1),setMenuActive(menuActive),setMenuIndex()},loader=react_default.a.createElement(Loader.a,null);return react_default.a.createElement(GoogleShoppingSettingsContext.b.Provider,{value:{menuActive:menuActive,selectedCampaign:selectedCampaign,dayRangeAll:dayRangeAll,dayRangeOne:dayRangeOne,metricType:metricType,view:view,actionSuccess:actionSuccess,handleView:function(event,updateView){handleAsync(!1),setView(updateView)},handleDayRangeAll:function(updateDayRangeAll){setDayRangeAll(updateDayRangeAll)},handleDayRangeOne:function(updateDayRangeOne){setDayRangeOne(updateDayRangeOne)},handleSelectedCampaign:function(campaign){setSelectedCampaign(campaign)},handleModalActive:function(id,name,action){setCampaignId(id),setCampaignName(name),setActionType(action);var message={pause:text.google_campaigns_action_pause.format(name),enable:text.google_campaigns_action_resume.format(name),delete:text.google_campaigns_action_remove.format(name)},label={pause:buttons.pause,enable:buttons.enable,delete:buttons.remove};setModalMessage(message[action]),setModalActionLabelConfirm(label[action]),setModalActionType({pause:"destructive",enable:"positive",delete:"destructive"}[action]),setModalActive(!0)},handleMenuActive:function(event,params){var index=params.index;handleMenuInactive(),menuActive[index]=!0,setMenuActive(menuActive),setMenuIndex(index)},handleMenuInactive:handleMenuInactive,handleMenuAction:handleMenuAction}},react_default.a.createElement(ComponentViewHeader.a,{label:text.google_campaigns_smart_shopping_campaign}),!merchantAccountConnected&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Block.a,{padding:"4",borderBottom:!0},react_default.a.createElement(components_ComponentOverview,null)),react_default.a.createElement(Block.a,{padding:"4"},react_default.a.createElement(react.Suspense,{fallback:loader},react_default.a.createElement(ComponentSetupMerchant,null)))),!merchantAccountComplete&&merchantAccountConnected&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Block.a,{padding:"4"},react_default.a.createElement(components_ComponentOverview,null)),react_default.a.createElement(Block.a,{padding:"4",paddingTop:"2"},react_default.a.createElement(react.Suspense,{fallback:loader},react_default.a.createElement(ComponentConfiguring,null)))),merchantAccountComplete&&!adsAccountConnected&&merchantAccountConnected&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Block.a,{padding:"4",borderBottom:!0},react_default.a.createElement(components_ComponentOverview,null)),react_default.a.createElement(Block.a,{padding:"4"},react_default.a.createElement(react.Suspense,{fallback:loader},react_default.a.createElement(ComponentSetupAds,null)))),merchantAccountComplete&&merchantAccountConnected&&adsAccountConnected&&react_default.a.createElement(react_default.a.Fragment,null,"start"===view&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Block.a,{padding:"4",borderBottom:!0},react_default.a.createElement(components_ComponentOverview,null)),react_default.a.createElement(react.Suspense,{fallback:loader},react_default.a.createElement(ComponentStart,null))),"create"===view&&react_default.a.createElement(react.Suspense,{fallback:loader},react_default.a.createElement(ComponentEdit,{create:!0})),"edit"===view&&react_default.a.createElement(react.Suspense,{fallback:loader},react_default.a.createElement(ComponentEdit,null)),"detail"===view&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Block.a,{padding:"4"},react_default.a.createElement(components_ComponentActions,{showButton:!1})),react_default.a.createElement(react.Suspense,{fallback:loader},react_default.a.createElement(ComponentDetail,null))),"list"===view&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Block.a,{padding:"4"},react_default.a.createElement(components_ComponentActions,null)),react_default.a.createElement(react.Suspense,{fallback:loader},react_default.a.createElement(ComponentList,null))),react_default.a.createElement(ModalConfirm.a,{label:text.confirm,message:modalMessage,confirm:handleMenuAction,cancel:function(){setCampaignId(),setCampaignName(),setActionType(),setModalActive(!1)},active:modalActive,async:async,action:modalActionType,actionLabelConfirm:modalActionLabelConfirm})))};__webpack_exports__.default=ViewCampaigns;ViewCampaigns.__docgenInfo={description:"",methods:[],displayName:"ViewCampaigns"},ViewCampaigns.__docgenInfo={description:"",methods:[],displayName:"ViewCampaigns"},ViewCampaigns.__docgenInfo={description:"",methods:[],displayName:"ViewCampaigns"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/ViewCampaigns.js"]={name:"ViewCampaigns",docgenInfo:ViewCampaigns.__docgenInfo,path:"src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/ViewCampaigns.js"})}}]);
//# sourceMappingURL=13.bc53b3e43afba32eb8bf.bundle.js.map