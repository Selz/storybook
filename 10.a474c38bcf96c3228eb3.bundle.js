(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{2302:function(module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2259),_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(203),_hooks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(180),_GoogleShoppingSettingsContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(104),ComponentNotificationAdwords=function(){var text=Object(_hooks__WEBPACK_IMPORTED_MODULE_3__.a)().text,_useContext=Object(react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_GoogleShoppingSettingsContext__WEBPACK_IMPORTED_MODULE_4__.b),notificationAdwordsActive=_useContext.notificationAdwordsActive,handleNotificationAdwordsInactive=_useContext.handleNotificationAdwordsInactive,notificationAdwordsTargetFormatted=_useContext.notificationAdwordsTargetFormatted;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_1__.a,{message:text.google_campaigns_spend.format(notificationAdwordsTargetFormatted,notificationAdwordsTargetFormatted),appearance:"info",animate:!1,marginBottom:"0",marginTop:"3",align:"left",showIcon:!1,active:notificationAdwordsActive,inactive:handleNotificationAdwordsInactive,link:react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_2__.a,{label:text.terms_apply,href:"https://www.google.com/intl/en_au/ads/coupons/terms/",target:"_blank"}),persist:!0,dismiss:!0})};ComponentNotificationAdwords.__docgenInfo={description:"",methods:[],displayName:"ComponentNotificationAdwords"},__webpack_exports__.a=ComponentNotificationAdwords,ComponentNotificationAdwords.__docgenInfo={description:"",methods:[],displayName:"ComponentNotificationAdwords"},ComponentNotificationAdwords.__docgenInfo={description:"",methods:[],displayName:"ComponentNotificationAdwords"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentNotificationAdwords.js"]={name:"ComponentNotificationAdwords",docgenInfo:ComponentNotificationAdwords.__docgenInfo,path:"src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentNotificationAdwords.js"})},2317:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var slicedToArray=__webpack_require__(3),slicedToArray_default=__webpack_require__.n(slicedToArray),prop_types=__webpack_require__(1),prop_types_default=__webpack_require__.n(prop_types),react=__webpack_require__(0),react_default=__webpack_require__.n(react),Loader=__webpack_require__(328),useLocale=__webpack_require__(180),useRequestSingle=__webpack_require__(2269),GoogleShoppingSettingsContext=__webpack_require__(104),defineProperty=(__webpack_require__(10),__webpack_require__(24),__webpack_require__(18),__webpack_require__(30),__webpack_require__(13),__webpack_require__(28),__webpack_require__(84),__webpack_require__(42),__webpack_require__(43),__webpack_require__(12),__webpack_require__(23),__webpack_require__(207),__webpack_require__(19),__webpack_require__(34),__webpack_require__(2)),defineProperty_default=__webpack_require__.n(defineProperty),index_es=__webpack_require__(250),Form=__webpack_require__(2279),FormControlGroup=__webpack_require__(2292),FormLabel=__webpack_require__(474),FormInput=__webpack_require__(152),FormErrorMessage=__webpack_require__(334),FormInputGroup=__webpack_require__(2297),FormSelect=__webpack_require__(863),Text=__webpack_require__(33),FormCheckbox=__webpack_require__(2262),Block=__webpack_require__(52),bind=__webpack_require__(8),cx=__webpack_require__.n(bind).a.bind(),FormActions=function(props){var children=props.children,actionsClass=cx(["form-actions","actions"]);return react_default.a.createElement("div",{className:actionsClass},children)};FormActions.defaultProps={children:void 0},FormActions.propTypes={children:prop_types_default.a.node},FormActions.__docgenInfo={description:"",methods:[],displayName:"FormActions",props:{children:{defaultValue:{value:"undefined",computed:!0},type:{name:"node"},required:!1,description:""}}};var form_actions_FormActions=FormActions;FormActions.__docgenInfo={description:"",methods:[],displayName:"FormActions",props:{children:{defaultValue:{value:"undefined",computed:!0},type:{name:"node"},required:!1,description:""}}},FormActions.__docgenInfo={description:"",methods:[],displayName:"FormActions",props:{children:{defaultValue:{value:"undefined",computed:!0},type:{name:"node"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/components/form-actions/FormActions.js"]={name:"FormActions",docgenInfo:FormActions.__docgenInfo,path:"src/Drachma.Web/assets/react/components/form-actions/FormActions.js"});var Button=__webpack_require__(46),ComponentNotificationAdwords=__webpack_require__(2302);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}var ComponentForm=function(props){var hasErrors,hasName,hasBudget,_useContext=Object(react.useContext)(GoogleShoppingSettingsContext.c),setup=_useContext.setup,handleAsync=_useContext.handleAsync,apiCampaignSave=_useContext.apiCampaignSave,async=_useContext.async,setupCampaigns=JSON.parse(setup).setupCampaigns,_useLocale=Object(useLocale.a)(),text=_useLocale.text,buttons=_useLocale.buttons,validation=_useLocale.validation,targetCountryOptions=setupCampaigns.targetCountryOptions,currencyFormatted=setupCampaigns.currencyFormatted,minimumBudget=setupCampaigns.minimumBudget,minimumBudgetFormatted=setupCampaigns.minimumBudgetFormatted,notificationAdwordsShow=setupCampaigns.notificationAdwordsShow,_useContext2=Object(react.useContext)(GoogleShoppingSettingsContext.b),handleViewActive=_useContext2.handleViewActive,selectedCampaign=_useContext2.selectedCampaign,handleRequestSingle=Object(useRequestSingle.a)().handleRequestSingle,handleSaveSuccess=props.handleSaveSuccess,handleSaveError=props.handleSaveError,handleLoading=props.handleLoading,defaultValues=props.defaultValues,defaultOptions=props.defaultOptions,loading=props.loading,campaignName=defaultValues.campaignName,budgetAmount=defaultValues.budgetAmount,targetCountry=defaultValues.targetCountry,excludeCategories=defaultValues.excludeCategories,availableCategories=defaultOptions.availableCategories,hasAvailableCategories=availableCategories.length,_useFormState=Object(index_es.a)({campaignName:campaignName,budgetAmount:budgetAmount,excludeCategories:excludeCategories,targetCountry:targetCountry.value},{withIds:function(name){return name}}),_useFormState2=slicedToArray_default()(_useFormState,2),formState=_useFormState2[0],_useFormState2$=_useFormState2[1],textForm=_useFormState2$.text,number=_useFormState2$.number,select=_useFormState2$.select,checkbox=_useFormState2$.checkbox,label=_useFormState2$.label,handleSubmit=function(event){var requestData=function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}({},formState.values,{id:selectedCampaign&&selectedCampaign.id});handleAsync(!0),handleLoading("save",!0),handleRequestSingle({url:apiCampaignSave,data:requestData,handleError:handleSaveError,handleSuccess:handleSaveSuccess}),event.preventDefault()};return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Form.a,{onSubmit:handleSubmit,horizontal:!0},react_default.a.createElement(FormControlGroup.a,{valid:!formState.touched.campaignName||formState.validity.campaignName,labelHook:react_default.a.createElement(FormLabel.a,{htmlFor:label("campaignName").htmlFor,label:text.google_campaigns_form_campaign_name_label}),controls:!0,grouped:!0},react_default.a.createElement(FormInput.a,{validate:textForm({name:"campaignName",validate:function(value){return!!value.trim()||validation.generic.required.format(text.google_campaigns_form_campaign_name_label)}}),name:textForm("campaignName").name,id:textForm("campaignName").id,value:textForm("campaignName").value,onChange:textForm("campaignName").onChange,onBlur:textForm("campaignName").onBlur,disabled:async,placeholder:text.google_campaigns_form_campaign_name_placeholder,testId:"input-campaign-name"}),formState.touched.campaignName&&formState.errors.campaignName&&react_default.a.createElement(FormErrorMessage.a,{label:formState.errors.campaignName,marginBottom:"0",testId:"error-campaign-name"})),react_default.a.createElement(FormControlGroup.a,{valid:!formState.touched.budgetAmount||formState.validity.budgetAmount,labelHook:react_default.a.createElement(FormLabel.a,{htmlFor:label("budgetAmount").htmlFor,label:text.google_campaigns_form_daily_budget_label}),help:text.google_campaigns_form_daily_budget_help.format(minimumBudgetFormatted),notification:notificationAdwordsShow&&react_default.a.createElement(ComponentNotificationAdwords.a,null),controls:!0,grouped:!0},react_default.a.createElement(FormInputGroup.a,{icon:currencyFormatted,inline:!0},react_default.a.createElement(FormInput.a,{validate:number({name:"budgetAmount",validate:function(value){return value.trim()?!(parseInt(value.trim(),10)<minimumBudget)||text.google_campaigns_form_daily_budget_validation_message.format(minimumBudgetFormatted):validation.generic.required.format(text.google_campaigns_form_daily_budget_label)}}),name:number("budgetAmount").name,id:number("budgetAmount").id,value:number("budgetAmount").value,onChange:number("budgetAmount").onChange,onBlur:number("budgetAmount").onBlur,type:number("budgetAmount").type,disabled:async,placeholder:text.google_campaigns_form_daily_budget_placeholder,testId:"input-budget-amount"})),formState.touched.budgetAmount&&formState.errors.budgetAmount&&react_default.a.createElement(FormErrorMessage.a,{label:formState.errors.budgetAmount,marginBottom:"0",testId:"error-budget-amount"})),react_default.a.createElement(FormControlGroup.a,{label:text.google_campaigns_form_target_country_label,id:"targetCountry",showLabel:!0,controls:!0,grouped:!0},1<targetCountryOptions.length&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(FormSelect.a,{id:select("targetCountry").id,name:select("targetCountry").name,value:select("targetCountry").value,onChange:select("targetCountry").onChange,options:targetCountryOptions,valueKey:"value",disabled:async,control:!0})),1===targetCountryOptions.length&&react_default.a.createElement(Text.a,{label:targetCountry.label||targetCountryOptions[0].label,marginBottom:"2",marginTop:"1",paddingTop:"2px"})),react_default.a.createElement(FormControlGroup.a,{label:text.google_campaigns_form_exclude_categories_label,id:"excludeCategories",help:text.google_campaigns_form_exclude_categories_help_select,showLabel:!0,controls:!0,grouped:!0},availableCategories.map((function(item,index){return react_default.a.createElement(FormCheckbox.a,{name:checkbox("excludeCategories",item.value).name,value:checkbox("excludeCategories",item.value).value,checked:checkbox("excludeCategories",item.value).checked,onChange:checkbox("excludeCategories",item.value).onChange,onBlur:checkbox("excludeCategories",item.value).onBlur,id:item.value,disabled:async,label:item.label,key:index,marginTop:"1",controls:!0})})),!hasAvailableCategories&&react_default.a.createElement(Text.a,{label:text.google_campaigns_form_exclude_categories_help_no_categories,marginBottom:"2",marginTop:"1",paddingTop:"2px"})),react_default.a.createElement(Block.a,{padding:"4",borderTop:!0},react_default.a.createElement(Text.a,{strong:!0,label:text.google_campaigns_campaign_targeted_customers,size:"base"}),react_default.a.createElement(Text.a,{label:text.google_campaigns_campaign_targeted_customers_description,marginBottom:"4"}),react_default.a.createElement(Text.a,{strong:!0,label:text.google_campaigns_campaign_duration,size:"base"}),react_default.a.createElement(Text.a,{label:text.google_campaigns_campaign_duration_description,marginBottom:"0"})),react_default.a.createElement(form_actions_FormActions,null,react_default.a.createElement(Button.a,{label:buttons.save,onClick:handleSubmit,type:"submit",appearance:"primary",marginTop:"4",marginRight:"0",disabled:(hasErrors=0<Object.entries(formState.errors).length,hasName=0<formState.values.campaignName.length,hasBudget=0<formState.values.budgetAmount.length,!(!hasErrors&&hasName&&hasBudget)||async),loading:loading.save,testId:"button-save-campaign"}),react_default.a.createElement(Button.a,{label:buttons.cancel,onClick:function(){handleViewActive({view:"list"})},appearance:"default",marginTop:"4",disabled:async,loading:loading.cancel,testId:"button-cancel-campaign"}))))};ComponentForm.defaultProps={defaultValues:{},defaultOptions:{}},ComponentForm.propTypes={defaultValues:prop_types_default.a.object,defaultOptions:prop_types_default.a.object,handleSaveSuccess:prop_types_default.a.func,handleSaveError:prop_types_default.a.func,handleLoading:prop_types_default.a.func,loading:prop_types_default.a.object},ComponentForm.__docgenInfo={description:"",methods:[],displayName:"ComponentForm",props:{defaultValues:{defaultValue:{value:"{}",computed:!1},type:{name:"object"},required:!1,description:""},defaultOptions:{defaultValue:{value:"{}",computed:!1},type:{name:"object"},required:!1,description:""},handleSaveSuccess:{type:{name:"func"},required:!1,description:""},handleSaveError:{type:{name:"func"},required:!1,description:""},handleLoading:{type:{name:"func"},required:!1,description:""},loading:{type:{name:"object"},required:!1,description:""}}};var components_ComponentForm=ComponentForm;ComponentForm.__docgenInfo={description:"",methods:[],displayName:"ComponentForm",props:{defaultValues:{defaultValue:{value:"{}",computed:!1},type:{name:"object"},required:!1,description:""},defaultOptions:{defaultValue:{value:"{}",computed:!1},type:{name:"object"},required:!1,description:""},handleSaveSuccess:{type:{name:"func"},required:!1,description:""},handleSaveError:{type:{name:"func"},required:!1,description:""},handleLoading:{type:{name:"func"},required:!1,description:""},loading:{type:{name:"object"},required:!1,description:""}}},ComponentForm.__docgenInfo={description:"",methods:[],displayName:"ComponentForm",props:{defaultValues:{defaultValue:{value:"{}",computed:!1},type:{name:"object"},required:!1,description:""},defaultOptions:{defaultValue:{value:"{}",computed:!1},type:{name:"object"},required:!1,description:""},handleSaveSuccess:{type:{name:"func"},required:!1,description:""},handleSaveError:{type:{name:"func"},required:!1,description:""},handleLoading:{type:{name:"func"},required:!1,description:""},loading:{type:{name:"object"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentForm.js"]={name:"ComponentForm",docgenInfo:ComponentForm.__docgenInfo,path:"src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentForm.js"});var ComponentEdit=function(props){var _useContext=Object(react.useContext)(GoogleShoppingSettingsContext.c),setup=_useContext.setup,handleAsync=_useContext.handleAsync,handleModalErrorActive=_useContext.handleModalErrorActive,handleModalErrorMessage=_useContext.handleModalErrorMessage,handleNotificationType=_useContext.handleNotificationType,handleNotificationMessage=_useContext.handleNotificationMessage,handleNotificationActive=_useContext.handleNotificationActive,handleCampaignEnableTipActive=_useContext.handleCampaignEnableTipActive,apiCampaignEdit=_useContext.apiCampaignEdit,_useContext2=Object(react.useContext)(GoogleShoppingSettingsContext.b),selectedCampaign=_useContext2.selectedCampaign,handleViewActive=_useContext2.handleViewActive,handleSelectedCampaign=_useContext2.handleSelectedCampaign,setupCampaigns=JSON.parse(setup).setupCampaigns,text=Object(useLocale.a)().text,handleRequestSingle=Object(useRequestSingle.a)().handleRequestSingle,targetCountrySelected=setupCampaigns.targetCountrySelected,_useState=Object(react.useState)(""),_useState2=slicedToArray_default()(_useState,2),campaignName=_useState2[0],setCampaignName=_useState2[1],_useState3=Object(react.useState)(""),_useState4=slicedToArray_default()(_useState3,2),budgetAmount=_useState4[0],setBudgetAmount=_useState4[1],_useState5=Object(react.useState)(targetCountrySelected),_useState6=slicedToArray_default()(_useState5,2),targetCountry=_useState6[0],setTargetCountry=_useState6[1],_useState7=Object(react.useState)([]),_useState8=slicedToArray_default()(_useState7,2),excludeCategories=_useState8[0],setExcludeCategories=_useState8[1],_useState9=Object(react.useState)([]),_useState10=slicedToArray_default()(_useState9,2),availableCategories=_useState10[0],setAvailableCategories=_useState10[1],_useState11=Object(react.useState)(!1),_useState12=slicedToArray_default()(_useState11,2),data=_useState12[0],setData=_useState12[1],_useState13=Object(react.useState)({}),_useState14=slicedToArray_default()(_useState13,2),loading=_useState14[0],setLoading=_useState14[1],create=props.create,handleRequestSuccess=function(response){var item=slicedToArray_default()(response.data.results,1)[0],hasCampaignName=item.campaignName,hasBudgetAmount=item.budgetAmount,hasTargetCountry=item.targetCountry,hasExcludeCategories=item.excludeCategories,hasAvailableCategories=item.availableCategories;hasCampaignName&&setCampaignName(hasCampaignName),hasBudgetAmount&&setBudgetAmount(hasBudgetAmount),hasTargetCountry&&setTargetCountry(hasTargetCountry),hasExcludeCategories&&setExcludeCategories(hasExcludeCategories),hasAvailableCategories&&setAvailableCategories(hasAvailableCategories),handleAsync(!1),setData(!0)},handleRequestError=function(_ref2){var errorMessage=_ref2.errorMessage;handleAsync(!1),handleModalErrorMessage(errorMessage),handleModalErrorActive()};return Object(react.useEffect)((function(){handleAsync(!0),create&&handleSelectedCampaign({}),handleRequestSingle({url:apiCampaignEdit,params:{campaignId:create?0:selectedCampaign.id},method:"get",handleError:handleRequestError,handleSuccess:handleRequestSuccess})}),[]),react_default.a.createElement(react_default.a.Fragment,null,!data&&react_default.a.createElement(Loader.a,null),data&&react_default.a.createElement(components_ComponentForm,{handleSaveSuccess:function(response){var feedback=response.feedback,campaign=response.data;if(handleAsync(!1),setLoading({save:!1,cancel:!1}),feedback)handleNotificationType("error"),handleNotificationMessage(feedback.message),handleNotificationActive();else{var id=campaign.id;handleViewActive({view:"list"}),handleCampaignEnableTipActive(),handleSelectedCampaign({id:id}),handleNotificationType("success"),handleNotificationMessage(create?text.google_campaigns_create_notification_success:text.google_campaigns_save_notification_success),handleNotificationActive()}},handleSaveError:function(_ref){var errorMessage=_ref.errorMessage;handleAsync(!1),handleModalErrorMessage(errorMessage),handleModalErrorActive()},handleLoading:function(type,value){var update={};update[type]=value,setLoading(update)},defaultValues:{campaignName:campaignName,budgetAmount:budgetAmount,targetCountry:targetCountry,excludeCategories:excludeCategories},defaultOptions:{availableCategories:availableCategories},loading:loading}))};ComponentEdit.propTypes={create:prop_types_default.a.bool},ComponentEdit.__docgenInfo={description:"",methods:[],displayName:"ComponentEdit",props:{create:{type:{name:"bool"},required:!1,description:""}}};__webpack_exports__.default=ComponentEdit;ComponentEdit.__docgenInfo={description:"",methods:[],displayName:"ComponentEdit",props:{create:{type:{name:"bool"},required:!1,description:""}}},ComponentEdit.__docgenInfo={description:"",methods:[],displayName:"ComponentEdit",props:{create:{type:{name:"bool"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentEdit.js"]={name:"ComponentEdit",docgenInfo:ComponentEdit.__docgenInfo,path:"src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentEdit.js"})}}]);
//# sourceMappingURL=10.a474c38bcf96c3228eb3.bundle.js.map