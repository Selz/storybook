(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{2274:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(21),__webpack_require__(115);var slicedToArray=__webpack_require__(3),slicedToArray_default=__webpack_require__.n(slicedToArray),react=__webpack_require__(0),react_default=__webpack_require__.n(react),Loader=__webpack_require__(211),Block=__webpack_require__(46),ModalConfirm=__webpack_require__(2209),useLocale=__webpack_require__(189),useRequestSingle=__webpack_require__(2219),useViewActive=__webpack_require__(912),hasStorage=function(){var storage,type=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"localStorage";try{return(storage=window[type]).setItem("__storage_test__","__storage_test__"),storage.removeItem("__storage_test__"),!0}catch(e){return!1}}(),use_local_storage_useLocalStorage=function(){return{handleLocalStorageSet:function(_ref){var key=_ref.key,value=_ref.value;return hasStorage?localStorage.setItem(key,value):null},handleLocalStorageGet:function(_ref2){var key=_ref2.key;return hasStorage?localStorage.getItem(key):null}}},reducers=__webpack_require__(759),ComponentViewHeader=__webpack_require__(496),GoogleShoppingSettingsContext=__webpack_require__(104),prop_types=(__webpack_require__(32),__webpack_require__(29),__webpack_require__(35),__webpack_require__(1)),prop_types_default=__webpack_require__.n(prop_types),index_es=__webpack_require__(263),Flex=__webpack_require__(114),FlexItem=__webpack_require__(86),FormControlGroup=__webpack_require__(2247),FormSelect=__webpack_require__(910),Button=__webpack_require__(53),ComponentActions=function(props){var showButton=props.showButton,_useContext=Object(react.useContext)(GoogleShoppingSettingsContext.c),setup=_useContext.setup,async=_useContext.async,setupCampaigns=JSON.parse(setup).setupCampaigns,text=Object(useLocale.a)().text,dayRangeOptions=setupCampaigns.dayRangeOptions,_useContext2=Object(react.useContext)(GoogleShoppingSettingsContext.b),dayRangeAll=_useContext2.dayRangeAll,handleViewActive=_useContext2.handleViewActive,handleDayRangeAll=_useContext2.handleDayRangeAll,_useFormState=Object(index_es.a)({dayRange:dayRangeAll},{withIds:function(name){return name},onChange:function(e,stateValues,nextStateValues){handleDayRangeAll(nextStateValues.dayRange)}}),_useFormState2=slicedToArray_default()(_useFormState,2),formState=_useFormState2[0],select=_useFormState2[1].select;return Object(react.useEffect)((function(){handleDayRangeAll(formState.values.dayRange)}),[formState.values.dayRange]),react_default.a.createElement(Flex.a,{display:"flex"},react_default.a.createElement(FlexItem.a,null,react_default.a.createElement(FormControlGroup.a,{label:"Range",id:"dayRange",showLabel:!1,padding:"0"},react_default.a.createElement(FormSelect.a,{id:select("dayRange").id,name:select("dayRange").name,value:select("dayRange").value,onChange:select("dayRange").onChange,options:dayRangeOptions,valueKey:"value",disabled:async,control:!0}))),react_default.a.createElement(FlexItem.a,{paddingLeft:"4",marginLeft:"auto"},showButton&&react_default.a.createElement(Button.a,{label:text.google_campaigns_create,onClick:function(event,param){handleViewActive({view:param})},onClickParam:"create",appearance:"primary",disabled:async,testId:"button-create-campaign"})))};ComponentActions.defaultProps={showButton:!0},ComponentActions.propTypes={showButton:prop_types_default.a.bool},ComponentActions.__docgenInfo={description:"",methods:[],displayName:"ComponentActions",props:{showButton:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""}}};var components_ComponentActions=ComponentActions;ComponentActions.__docgenInfo={description:"",methods:[],displayName:"ComponentActions",props:{showButton:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""}}},ComponentActions.__docgenInfo={description:"",methods:[],displayName:"ComponentActions",props:{showButton:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentActions.js"]={name:"ComponentActions",docgenInfo:ComponentActions.__docgenInfo,path:"src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentActions.js"});__webpack_require__(27);var Text=__webpack_require__(34),Link=__webpack_require__(213),ComponentOverview=function(){var text=Object(useLocale.a)().text;return react_default.a.createElement(Text.a,{marginBottom:"0"},"".concat(text.google_campaigns_overview_1," ").concat(text.learn_more_about," "),react_default.a.createElement(Link.a,{label:"".concat(text.google_campaigns_smart_shopping_campaigns,"."),href:"https://www.google.com/retail/solutions/shopping-campaigns",target:"_blank"}))};ComponentOverview.__docgenInfo={description:"",methods:[],displayName:"ComponentOverview"};var components_ComponentOverview=ComponentOverview;ComponentOverview.__docgenInfo={description:"",methods:[],displayName:"ComponentOverview"},ComponentOverview.__docgenInfo={description:"",methods:[],displayName:"ComponentOverview"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentOverview.js"]={name:"ComponentOverview",docgenInfo:ComponentOverview.__docgenInfo,path:"src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/components/ComponentOverview.js"});var ComponentStart=Object(react.lazy)((function(){return __webpack_require__.e(21).then(__webpack_require__.bind(null,2271))})),ComponentDetail=Object(react.lazy)((function(){return __webpack_require__.e(10).then(__webpack_require__.bind(null,2272))})),ComponentEdit=Object(react.lazy)((function(){return __webpack_require__.e(11).then(__webpack_require__.bind(null,2278))})),ComponentList=Object(react.lazy)((function(){return __webpack_require__.e(6).then(__webpack_require__.bind(null,2275))})),ComponentSetupAds=Object(react.lazy)((function(){return __webpack_require__.e(18).then(__webpack_require__.bind(null,2273))})),ComponentSetupMerchant=Object(react.lazy)((function(){return __webpack_require__.e(0).then(__webpack_require__.bind(null,2270))})),ComponentConfiguring=Object(react.lazy)((function(){return __webpack_require__.e(1).then(__webpack_require__.bind(null,2262))})),ViewCampaigns=function(){var _useContext=Object(react.useContext)(GoogleShoppingSettingsContext.c),setup=_useContext.setup,apiCampaignPause=_useContext.apiCampaignPause,apiCampaignEnable=_useContext.apiCampaignEnable,apiCampaignDelete=_useContext.apiCampaignDelete,handleModalErrorActive=_useContext.handleModalErrorActive,handleModalErrorMessage=_useContext.handleModalErrorMessage,handleNotificationType=_useContext.handleNotificationType,handleNotificationMessage=_useContext.handleNotificationMessage,handleNotificationActive=_useContext.handleNotificationActive,handleAsync=_useContext.handleAsync,merchantAccountConnected=_useContext.merchantAccountConnected,merchantAccountComplete=_useContext.merchantAccountComplete,adsAccountConnected=_useContext.adsAccountConnected,async=_useContext.async,setupCampaigns=JSON.parse(setup).setupCampaigns,dayRangeAllDefault=setupCampaigns.dayRangeAllDefault,dayRangeOneDefault=setupCampaigns.dayRangeOneDefault,notificationAdwordsTargetFormatted=setupCampaigns.notificationAdwordsTargetFormatted,_useReducer=Object(react.useReducer)(reducers.a,[]),_useReducer2=slicedToArray_default()(_useReducer,2),menuActive=_useReducer2[0],dispatchMenuActive=_useReducer2[1],_useState=Object(react.useState)(!1),_useState2=slicedToArray_default()(_useState,2),modalActive=_useState2[0],setModalActive=_useState2[1],_useState3=Object(react.useState)(),_useState4=slicedToArray_default()(_useState3,2),modalMessage=_useState4[0],setModalMessage=_useState4[1],_useState5=Object(react.useState)(),_useState6=slicedToArray_default()(_useState5,2),modalActionType=_useState6[0],setModalActionType=_useState6[1],_useState7=Object(react.useState)(),_useState8=slicedToArray_default()(_useState7,2),modalActionLabelConfirm=_useState8[0],setModalActionLabelConfirm=_useState8[1],_useState9=Object(react.useState)(!1),_useState10=slicedToArray_default()(_useState9,2),actionSuccess=_useState10[0],setActionSuccess=_useState10[1],_useState11=Object(react.useState)(),_useState12=slicedToArray_default()(_useState11,2),campaignId=_useState12[0],setCampaignId=_useState12[1],_useState13=Object(react.useState)(),_useState14=slicedToArray_default()(_useState13,2),campaignName=_useState14[0],setCampaignName=_useState14[1],_useState15=Object(react.useState)(dayRangeAllDefault),_useState16=slicedToArray_default()(_useState15,2),dayRangeAll=_useState16[0],setDayRangeAll=_useState16[1],_useState17=Object(react.useState)(dayRangeOneDefault),_useState18=slicedToArray_default()(_useState17,2),dayRangeOne=_useState18[0],setDayRangeOne=_useState18[1],_useState19=Object(react.useState)("0"),metricType=slicedToArray_default()(_useState19,1)[0],_useState21=Object(react.useState)(),_useState22=slicedToArray_default()(_useState21,2),actionType=_useState22[0],setActionType=_useState22[1],_useState23=Object(react.useState)({}),_useState24=slicedToArray_default()(_useState23,2),selectedCampaign=_useState24[0],setSelectedCampaign=_useState24[1],_useState25=Object(react.useState)(!0),_useState26=slicedToArray_default()(_useState25,2),notificationAdwordsActive=_useState26[0],setNotificationAdwordsActive=_useState26[1],_useState27=Object(react.useState)("adwords-notification"),notificationAdwordsKey=slicedToArray_default()(_useState27,1)[0],_useLocale=Object(useLocale.a)(),text=_useLocale.text,buttons=_useLocale.buttons,handleRequestSingle=Object(useRequestSingle.a)().handleRequestSingle,_useViewActive=Object(useViewActive.a)({view:"list",handleAsync:handleAsync}),viewActive=_useViewActive.viewActive,handleViewActive=_useViewActive.handleViewActive,_useLocalStorage=use_local_storage_useLocalStorage(),handleLocalStorageSet=_useLocalStorage.handleLocalStorageSet,handleLocalStorageGet=_useLocalStorage.handleLocalStorageGet,handleRequestError=function(_ref){var errorMessage=_ref.errorMessage;handleAsync(!1),handleModalErrorMessage(errorMessage),handleModalErrorActive()},handleActionSuccess=function(response){var feedback=response.feedback,message={pause:text.google_campaigns_action_pause_success.format(campaignName),enable:text.google_campaigns_action_resume_success.format(campaignName),delete:text.google_campaigns_action_remove_success.format(campaignName)};handleAsync(!1),setModalActive(!1),feedback?(setActionSuccess(!1),handleNotificationType("warning"),handleNotificationMessage(feedback.message),handleNotificationActive()):(setActionSuccess(!0),handleNotificationType("success"),handleNotificationMessage(message[actionType]),handleNotificationActive())},handleMenuAction=function(){handleAsync(!0),setActionSuccess(!1),handleRequestSingle({url:{pause:apiCampaignPause,enable:apiCampaignEnable,delete:apiCampaignDelete}[actionType],method:"post",data:{campaignId:campaignId},handleError:handleRequestError,handleSuccess:handleActionSuccess})};Object(react.useEffect)((function(){var dismissed;dismissed=handleLocalStorageGet({key:notificationAdwordsKey}),setNotificationAdwordsActive("true"!==dismissed)}),[]);var loader=react_default.a.createElement(Loader.a,null);return react_default.a.createElement(GoogleShoppingSettingsContext.b.Provider,{value:{menuActive:menuActive,selectedCampaign:selectedCampaign,dayRangeAll:dayRangeAll,dayRangeOne:dayRangeOne,metricType:metricType,actionSuccess:actionSuccess,notificationAdwordsActive:notificationAdwordsActive,notificationAdwordsTargetFormatted:notificationAdwordsTargetFormatted,handleViewActive:handleViewActive,handleDayRangeAll:function(updateDayRangeAll){setDayRangeAll(updateDayRangeAll)},handleDayRangeOne:function(updateDayRangeOne){setDayRangeOne(updateDayRangeOne)},handleSelectedCampaign:function(campaign){setSelectedCampaign(campaign)},handleModalActive:function(id,name,action){setCampaignId(id),setCampaignName(name),setActionType(action);var message={pause:text.google_campaigns_action_pause.format(name),enable:text.google_campaigns_action_resume.format(name),delete:text.google_campaigns_action_remove.format(name)},label={pause:buttons.pause,enable:buttons.enable,delete:buttons.remove};setModalMessage(message[action]),setModalActionLabelConfirm(label[action]),setModalActionType({pause:"destructive",enable:"positive",delete:"destructive"}[action]),setModalActive(!0)},handleMenuActive:function(event,params){var index=params.index;dispatchMenuActive({type:"active",index:index})},handleMenuInactive:function(params){var index=params.index;dispatchMenuActive({type:"inactive",index:index})},handleMenuInactiveAll:function(){dispatchMenuActive({type:"inactiveAll"})},handleMenuAction:handleMenuAction,handleNotificationAdwordsInactive:function(){setNotificationAdwordsActive(!1),handleLocalStorageSet({key:notificationAdwordsKey,value:"true"})}}},react_default.a.createElement(ComponentViewHeader.a,{label:text.google_campaigns_smart_shopping_campaign}),!merchantAccountConnected&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Block.a,{padding:"4",borderBottom:!0},react_default.a.createElement(components_ComponentOverview,null)),react_default.a.createElement(Block.a,{padding:"4"},react_default.a.createElement(react.Suspense,{fallback:loader},react_default.a.createElement(ComponentSetupMerchant,null)))),!merchantAccountComplete&&merchantAccountConnected&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Block.a,{padding:"4"},react_default.a.createElement(components_ComponentOverview,null)),react_default.a.createElement(Block.a,{padding:"4",paddingTop:"2"},react_default.a.createElement(react.Suspense,{fallback:loader},react_default.a.createElement(ComponentConfiguring,null)))),merchantAccountComplete&&!adsAccountConnected&&merchantAccountConnected&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Block.a,{padding:"4",borderBottom:!0},react_default.a.createElement(components_ComponentOverview,null)),react_default.a.createElement(Block.a,{padding:"4"},react_default.a.createElement(react.Suspense,{fallback:loader},react_default.a.createElement(ComponentSetupAds,null)))),merchantAccountComplete&&merchantAccountConnected&&adsAccountConnected&&react_default.a.createElement(react_default.a.Fragment,null,"start"===viewActive&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Block.a,{padding:"4",borderBottom:!0},react_default.a.createElement(components_ComponentOverview,null)),react_default.a.createElement(react.Suspense,{fallback:loader},react_default.a.createElement(ComponentStart,null))),"create"===viewActive&&react_default.a.createElement(react.Suspense,{fallback:loader},react_default.a.createElement(ComponentEdit,{create:!0})),"edit"===viewActive&&react_default.a.createElement(react.Suspense,{fallback:loader},react_default.a.createElement(ComponentEdit,null)),"detail"===viewActive&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Block.a,{padding:"4"},react_default.a.createElement(components_ComponentActions,{showButton:!1})),react_default.a.createElement(react.Suspense,{fallback:loader},react_default.a.createElement(ComponentDetail,null))),"list"===viewActive&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Block.a,{padding:"4"},react_default.a.createElement(components_ComponentActions,null)),react_default.a.createElement(react.Suspense,{fallback:loader},react_default.a.createElement(ComponentList,null))),react_default.a.createElement(ModalConfirm.a,{label:text.confirm,message:modalMessage,confirm:handleMenuAction,cancel:function(){setCampaignId(),setCampaignName(),setActionType(),setModalActive(!1)},active:modalActive,async:async,actionType:modalActionType,actionLabelConfirm:modalActionLabelConfirm,testId:"modal-confirm-campaign"})))};ViewCampaigns.__docgenInfo={description:"",methods:[],displayName:"ViewCampaigns"};__webpack_exports__.default=ViewCampaigns;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/ViewCampaigns.js"]={name:"ViewCampaigns",docgenInfo:ViewCampaigns.__docgenInfo,path:"src/Drachma.Web/assets/react/views/google-shopping-settings/views/campaigns/ViewCampaigns.js"})}}]);
//# sourceMappingURL=20.893374aa29e560177f2c.bundle.js.map