(window.webpackJsonp=window.webpackJsonp||[]).push([[6,2],{1643:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(19);var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__),_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1641),_components__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1640),_components__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(1632),_components__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1598),_components__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(58),ComponentSelectAccount=function(props){var setup=props.setup,onSubmit=props.onSubmit,labelForm=props.labelForm,labelButton=props.labelButton,showLabel=props.showLabel,loading=props.loading,disabled=props.disabled,accountOptions=setup.accountOptions,_useState=Object(react__WEBPACK_IMPORTED_MODULE_3__.useState)(),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState,2),selected=_useState2[0],setSelected=_useState2[1],select=0<accountOptions.length,options=accountOptions.map(function(item){return{label:item,value:item}}),handleSubmit=function(event){onSubmit(event,selected)};return Object(react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(function(){setSelected(options[0].value)},[]),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment,null,select&&react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_4__.a,{onSubmit:handleSubmit},react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_5__.a,{label:labelForm,id:"selectAccount",paddingLeft:"0",paddingRight:"0",paddingBottom:"0",showLabel:showLabel,display:"flex",controls:!0,grouped:!0},react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_6__.a,null,react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_7__.a,{id:"selectAccount",name:"selectAccount",options:options,value:selected,onChange:function(event){var value=event.target.value;setSelected(value)},disabled:loading||disabled}),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_8__.a,{appearance:"secondary",label:labelButton,ariaLabel:labelButton,onClick:handleSubmit,loading:loading,disabled:disabled,reference:"button-link-account"})))))};ComponentSelectAccount.propTypes={setup:prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.object,labelForm:prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string,labelButton:prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string,showLabel:prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.bool,loading:prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.bool,onSubmit:prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.func,disabled:prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.bool},__webpack_exports__.a=ComponentSelectAccount,ComponentSelectAccount.__docgenInfo={description:"",methods:[],displayName:"ComponentSelectAccount",props:{setup:{type:{name:"object"},required:!1,description:""},labelForm:{type:{name:"string"},required:!1,description:""},labelButton:{type:{name:"string"},required:!1,description:""},showLabel:{type:{name:"bool"},required:!1,description:""},loading:{type:{name:"bool"},required:!1,description:""},onSubmit:{type:{name:"func"},required:!1,description:""},disabled:{type:{name:"bool"},required:!1,description:""}}},ComponentSelectAccount.__docgenInfo={description:"",methods:[],displayName:"ComponentSelectAccount",props:{setup:{type:{name:"object"},required:!1,description:""},labelForm:{type:{name:"string"},required:!1,description:""},labelButton:{type:{name:"string"},required:!1,description:""},showLabel:{type:{name:"bool"},required:!1,description:""},loading:{type:{name:"bool"},required:!1,description:""},onSubmit:{type:{name:"func"},required:!1,description:""},disabled:{type:{name:"bool"},required:!1,description:""}}},ComponentSelectAccount.__docgenInfo={description:"",methods:[],displayName:"ComponentSelectAccount",props:{setup:{type:{name:"object"},required:!1,description:""},labelForm:{type:{name:"string"},required:!1,description:""},labelButton:{type:{name:"string"},required:!1,description:""},showLabel:{type:{name:"bool"},required:!1,description:""},loading:{type:{name:"bool"},required:!1,description:""},onSubmit:{type:{name:"func"},required:!1,description:""},disabled:{type:{name:"bool"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/google-shopping-settings/components/ComponentSelectAccount.js"]={name:"ComponentSelectAccount",docgenInfo:ComponentSelectAccount.__docgenInfo,path:"src/Drachma.Web/assets/react/views/google-shopping-settings/components/ComponentSelectAccount.js"})},1646:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1613),_GoogleShoppingSettingsContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(98),ComponentConfiguring=function(){var text=Object(react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_GoogleShoppingSettingsContext__WEBPACK_IMPORTED_MODULE_2__.c).locale.text;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_1__.a,{message:text.google_merchant_account_configuring_description,appearance:"info",animate:!1,form:!1,align:"left",marginBottom:"0",inline:!0,block:!0,persist:!0,active:!0}))};__webpack_exports__.default=ComponentConfiguring,ComponentConfiguring.__docgenInfo={description:"",methods:[],displayName:"ComponentConfiguring"},ComponentConfiguring.__docgenInfo={description:"",methods:[],displayName:"ComponentConfiguring"},ComponentConfiguring.__docgenInfo={description:"",methods:[],displayName:"ComponentConfiguring"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/google-shopping-settings/components/ComponentConfiguring.js"]={name:"ComponentConfiguring",docgenInfo:ComponentConfiguring.__docgenInfo,path:"src/Drachma.Web/assets/react/views/google-shopping-settings/components/ComponentConfiguring.js"})},1659:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var slicedToArray=__webpack_require__(3),slicedToArray_default=__webpack_require__.n(slicedToArray),react=__webpack_require__(0),react_default=__webpack_require__.n(react),ComponentConnectGoogle=__webpack_require__(622),GoogleShoppingSettingsContext=__webpack_require__(98),Block=__webpack_require__(130),Text=__webpack_require__(33),DefinitionList=__webpack_require__(1636),DefinitionTitle=__webpack_require__(1634),DefinitionDescription=__webpack_require__(1635),Notification=__webpack_require__(1613),Link=__webpack_require__(221),ComponentConfiguring=__webpack_require__(1646),ComponentAccount=function(){var _useContext=Object(react.useContext)(GoogleShoppingSettingsContext.c),setupMerchant=_useContext.setupMerchant,merchantAccountConnectedId=_useContext.merchantAccountConnectedId,locale=_useContext.locale,taxComplete=setupMerchant.taxComplete,shippingComplete=setupMerchant.shippingComplete,taxUrl=setupMerchant.taxUrl,shippingUrl=setupMerchant.shippingUrl,storeCurrency=setupMerchant.storeCurrency,storeCountry=setupMerchant.storeCountry,shopDomain=setupMerchant.shopDomain,accountComplete=setupMerchant.accountComplete,text=locale.text;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Block.a,{padding:"4",borderBottom:!0},react_default.a.createElement(Text.a,{strong:!0,label:text.google_merchant_center_account,size:"base",marginBottom:"2"}),react_default.a.createElement(Text.a,{label:merchantAccountConnectedId,marginBottom:"0"})),react_default.a.createElement(Block.a,{padding:"4",borderBottom:!0},react_default.a.createElement(Text.a,{strong:!0,label:text.target_market,size:"base",marginBottom:"2"}),react_default.a.createElement(Text.a,{label:text.google_merchant_account_target_market}),react_default.a.createElement(DefinitionList.a,{marginBottom:"0",appearance:"simple"},react_default.a.createElement(DefinitionTitle.a,null,text.google_merchant_account_store_currency_title),react_default.a.createElement(DefinitionDescription.a,null,storeCurrency,react_default.a.createElement(Text.a,{label:text.google_merchant_account_store_currency_description,small:!0,light:!0})),react_default.a.createElement(DefinitionTitle.a,null,text.google_merchant_account_target_country),react_default.a.createElement(DefinitionDescription.a,null,storeCountry,react_default.a.createElement(Text.a,{label:text.google_merchant_account_target_country_description,marginBottom:"0",small:!0,light:!0})))),react_default.a.createElement(Block.a,{padding:"4",borderBottom:!0},react_default.a.createElement(Text.a,{strong:!0,label:"Shipping",size:"base",marginBottom:"2"}),!accountComplete&&react_default.a.createElement(ComponentConfiguring.default,null),accountComplete&&react_default.a.createElement(Text.a,{label:text.google_merchant_account_store_shipping_settings,marginBottom:"0"}),accountComplete&&!shippingComplete&&react_default.a.createElement(Notification.a,{message:text.google_merchant_account_store_shipping_settings_configure.format(storeCountry),link:react_default.a.createElement(Link.a,{label:text.shipping_settings,href:shippingUrl}),appearance:"warning",animate:!1,form:!1,align:"left",marginBottom:"0",marginTop:"4",inline:!0,block:!0,persist:!0,active:!0})),react_default.a.createElement(Block.a,{padding:"4",borderBottom:!0},react_default.a.createElement(Text.a,{strong:!0,label:"Tax",size:"base",marginBottom:"2"}),!accountComplete&&react_default.a.createElement(ComponentConfiguring.default,null),accountComplete&&react_default.a.createElement(Text.a,{label:text.google_merchant_account_store_tax_settings,marginBottom:"0"}),accountComplete&&!taxComplete&&react_default.a.createElement(Notification.a,{message:text.google_merchant_account_store_shipping_settings_configure.format("United States"),link:react_default.a.createElement(Link.a,{label:text.tax_settings,href:taxUrl}),appearance:"warning",animate:!1,form:!1,align:"left",marginBottom:"0",marginTop:"4",inline:!0,block:!0,persist:!0,active:!0})),react_default.a.createElement(Block.a,{padding:"4",borderBottom:!0},react_default.a.createElement(Text.a,{strong:!0,label:"Domain",size:"base",marginBottom:"2"}),react_default.a.createElement(Text.a,{label:text.google_merchant_account_google_claim}),react_default.a.createElement(Text.a,{label:text.google_merchant_account_google_claim_domain.format(shopDomain)})))},components_ComponentAccount=ComponentAccount;ComponentAccount.__docgenInfo={description:"",methods:[],displayName:"ComponentAccount"},ComponentAccount.__docgenInfo={description:"",methods:[],displayName:"ComponentAccount"},ComponentAccount.__docgenInfo={description:"",methods:[],displayName:"ComponentAccount"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/google-shopping-settings/views/merchant/components/ComponentAccount.js"]={name:"ComponentAccount",docgenInfo:ComponentAccount.__docgenInfo,path:"src/Drachma.Web/assets/react/views/google-shopping-settings/views/merchant/components/ComponentAccount.js"});__webpack_require__(12),__webpack_require__(21),__webpack_require__(27),__webpack_require__(29),__webpack_require__(26),__webpack_require__(25),__webpack_require__(46),__webpack_require__(13),__webpack_require__(23),__webpack_require__(148),__webpack_require__(228),__webpack_require__(15),__webpack_require__(31);var defineProperty=__webpack_require__(2),defineProperty_default=__webpack_require__.n(defineProperty),index_es=__webpack_require__(227),Form=__webpack_require__(1641),FormCheckbox=__webpack_require__(1615),Button=__webpack_require__(58),useRequestSingle=__webpack_require__(1605),ComponentSelectAccount=__webpack_require__(1643);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach(function(key){defineProperty_default()(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))});return target}var ComponentStart=function(){var _useContext=Object(react.useContext)(GoogleShoppingSettingsContext.c),setupMerchant=_useContext.setupMerchant,apiMerchantLink=_useContext.apiMerchantLink,async=_useContext.async,handleAsync=_useContext.handleAsync,handleMerchantAccountConnected=_useContext.handleMerchantAccountConnected,handleMerchantAccountConnectedId=_useContext.handleMerchantAccountConnectedId,handleNotificationActive=_useContext.handleNotificationActive,handleModalErrorActive=_useContext.handleModalErrorActive,apiMerchantCreate=_useContext.apiMerchantCreate,text=_useContext.locale.text,handleShowAccount=Object(react.useContext)(GoogleShoppingSettingsContext.d).handleShowAccount,accountOptions=setupMerchant.accountOptions,handleRequestSingle=Object(useRequestSingle.a)().handleRequestSingle,_useState=Object(react.useState)(!1),_useState2=slicedToArray_default()(_useState,2),formValid=_useState2[0],setFormValid=_useState2[1],_useState3=Object(react.useState)({link:!1,create:!1}),_useState4=slicedToArray_default()(_useState3,2),loading=_useState4[0],setLoading=_useState4[1],_useFormState=Object(index_es.a)({termsAccepted:!0}),_useFormState2=slicedToArray_default()(_useFormState,2),formState=_useFormState2[0],checkbox=_useFormState2[1].checkbox;Object(react.useEffect)(function(){var values=formState.values,valid=Object.values(values).every(function(item){return!0===item});setFormValid(valid)},[formState]);var handleSuccess=function(response){var merchantId=response.data.merchantId;handleAsync(!1),setLoading({create:!1,link:!0}),handleMerchantAccountConnected(!0),handleMerchantAccountConnectedId(merchantId),handleShowAccount(),handleNotificationActive(text.google_merchant_create_notification_success,"success")},handleError=function(_ref){var errorMessage=_ref.errorMessage;handleAsync(!1),setLoading({create:!1,link:!0}),handleModalErrorActive(errorMessage)},handleCreate=function(event){handleAsync(!0),setLoading(_objectSpread({},loading,{create:!0})),handleRequestSingle({url:apiMerchantCreate,method:"get",handleError:handleError,handleSuccess:handleSuccess}),event.preventDefault()},id="termsAccepted",_checkbox=checkbox(id),name=_checkbox.name,onChange=_checkbox.onChange,type=_checkbox.type,checked=_checkbox.checked,hasAccountOptions=0<accountOptions.length,help=react_default.a.createElement(react_default.a.Fragment,null,"".concat(text.google_merchant_create_help," "),react_default.a.createElement(Link.a,{label:text.google_merchant_create_help_merchant_terms,href:"https://support.google.com/merchants/answer/160173?hl=en",target:"_blank"}),",",react_default.a.createElement(Link.a,{label:text.google_merchant_create_help_ads_policies,href:"https://support.google.com/merchants/answer/6149970?hl=en",target:"_blank"})," ".concat(text.and," "),react_default.a.createElement(Link.a,{label:text.google_merchant_create_help_ads_terms,href:"https://billing.google.com/payments/u/0/paymentsinfofinder?style=:md#",target:"_blank"}));return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Text.a,{strong:!0,label:text.google_merchant_center_account,size:"base",marginBottom:"0",padding:"4",paddingBottom:"0",reference:"heading-view"}),react_default.a.createElement(Block.a,{padding:"4",paddingBottom:"1"},react_default.a.createElement(Text.a,{marginBottom:"0"},"".concat(text.google_merchant_center_account_introduction_1," ").concat(text.learn_more_about," "),react_default.a.createElement(Link.a,{label:"".concat(text.google_merchant_center_account,"."),href:"https://www.google.com/retail/solutions/merchant-center/",target:"_blank"}))),hasAccountOptions&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Text.a,{strong:!0,label:text.use_existing_account,size:"base",marginBottom:"0",padding:"4",paddingBottom:"0",borderBottom:!0}),react_default.a.createElement(Block.a,{paddingLeft:"4",paddingRight:"4",paddingBottom:"4",borderBottom:!0},react_default.a.createElement(ComponentSelectAccount.a,{setup:setupMerchant,onSubmit:function(event,id){handleAsync(!0),setLoading(_objectSpread({},loading,{link:!0})),handleRequestSingle({url:apiMerchantLink,method:"post",data:{merchantId:id},handleError:handleError,handleSuccess:handleSuccess}),event.preventDefault()},labelAccount:text.google_merchant_center_account,labelForm:text.use_existing_account,labelButton:text.use_this_account,showLabel:!1,disabled:async,loading:loading.link}))),react_default.a.createElement(Text.a,{strong:!0,label:text.create_new_account,size:"base",marginBottom:"0",padding:"4",paddingBottom:"0",borderBottom:!0}),react_default.a.createElement(Block.a,{padding:"4"},react_default.a.createElement(Form.a,{submit:handleCreate},react_default.a.createElement(FormCheckbox.a,{label:text.google_merchant_create_checkbox,help:help,checked:checked,onChange:onChange,name:name,type:type,id:id,marginBottom:"2",disabled:async}),react_default.a.createElement(Text.a,{paddingTop:"2"},react_default.a.createElement(Button.a,{label:text.google_merchant_create_submit,onClick:handleCreate,type:"submit",appearance:"primary",disabled:!formValid||async,loading:loading.create,reference:"button-create-account"})))))},components_ComponentStart=ComponentStart;ComponentStart.__docgenInfo={description:"",methods:[],displayName:"ComponentStart"},ComponentStart.__docgenInfo={description:"",methods:[],displayName:"ComponentStart"},ComponentStart.__docgenInfo={description:"",methods:[],displayName:"ComponentStart"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/google-shopping-settings/views/merchant/components/ComponentStart.js"]={name:"ComponentStart",docgenInfo:ComponentStart.__docgenInfo,path:"src/Drachma.Web/assets/react/views/google-shopping-settings/views/merchant/components/ComponentStart.js"});var ViewMerchant=function(){var _useContext=Object(react.useContext)(GoogleShoppingSettingsContext.c),googleAccountConnected=_useContext.googleAccountConnected,merchantAccountConnected=_useContext.merchantAccountConnected,_useState=Object(react.useState)(merchantAccountConnected),_useState2=slicedToArray_default()(_useState,2),showAccount=_useState2[0],setShowAccount=_useState2[1];return react_default.a.createElement(GoogleShoppingSettingsContext.d.Provider,{value:{handleShowAccount:function(){setShowAccount(!showAccount)}}},react_default.a.createElement(ComponentConnectGoogle.a,null),googleAccountConnected&&react_default.a.createElement(react_default.a.Fragment,null,showAccount?react_default.a.createElement(components_ComponentAccount,null):react_default.a.createElement(components_ComponentStart,null)))};__webpack_exports__.default=ViewMerchant;ViewMerchant.__docgenInfo={description:"",methods:[],displayName:"ViewMerchant"},ViewMerchant.__docgenInfo={description:"",methods:[],displayName:"ViewMerchant"},ViewMerchant.__docgenInfo={description:"",methods:[],displayName:"ViewMerchant"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/google-shopping-settings/views/merchant/ViewMerchant.js"]={name:"ViewMerchant",docgenInfo:ViewMerchant.__docgenInfo,path:"src/Drachma.Web/assets/react/views/google-shopping-settings/views/merchant/ViewMerchant.js"})}}]);
//# sourceMappingURL=6.bc53b3e43afba32eb8bf.bundle.js.map