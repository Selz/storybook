(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{2227:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(13);var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__),_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2225),_components__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2224),_components__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2211),_components__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(2173),_components__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(67),ComponentSelectAccount=function(props){var setup=props.setup,onSubmit=props.onSubmit,labelForm=props.labelForm,labelButton=props.labelButton,showLabel=props.showLabel,loading=props.loading,disabled=props.disabled,accountOptions=setup.accountOptions,_useState=Object(react__WEBPACK_IMPORTED_MODULE_3__.useState)(),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_useState,2),selected=_useState2[0],setSelected=_useState2[1],select=0<accountOptions.length,options=accountOptions.map((function(item){return{label:item,value:item}})),handleSubmit=function(event){onSubmit(event,selected)};return Object(react__WEBPACK_IMPORTED_MODULE_3__.useEffect)((function(){setSelected(options[0].value)}),[]),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment,null,select&&react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_4__.a,{onSubmit:handleSubmit},react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_5__.a,{label:labelForm,paddingLeft:"0",paddingRight:"0",paddingBottom:"0",showLabel:showLabel,display:"flex",controls:!0,grouped:!0},react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_6__.a,null,react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_7__.a,{id:"selectAccount",name:"selectAccount",options:options,value:selected,onChange:function(event){var value=event.target.value;setSelected(value)},disabled:loading||disabled,testId:"select-link-account"}),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_8__.a,{appearance:"secondary",label:labelButton,ariaLabel:labelButton,onClick:handleSubmit,loading:loading,disabled:disabled,testId:"button-link-account"})))))};ComponentSelectAccount.propTypes={setup:prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.object,labelForm:prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string,labelButton:prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string,showLabel:prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.bool,loading:prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.bool,onSubmit:prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.func,disabled:prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.bool},ComponentSelectAccount.__docgenInfo={description:"",methods:[],displayName:"ComponentSelectAccount",props:{setup:{type:{name:"object"},required:!1,description:""},labelForm:{type:{name:"string"},required:!1,description:""},labelButton:{type:{name:"string"},required:!1,description:""},showLabel:{type:{name:"bool"},required:!1,description:""},loading:{type:{name:"bool"},required:!1,description:""},onSubmit:{type:{name:"func"},required:!1,description:""},disabled:{type:{name:"bool"},required:!1,description:""}}},__webpack_exports__.a=ComponentSelectAccount,ComponentSelectAccount.__docgenInfo={description:"",methods:[],displayName:"ComponentSelectAccount",props:{setup:{type:{name:"object"},required:!1,description:""},labelForm:{type:{name:"string"},required:!1,description:""},labelButton:{type:{name:"string"},required:!1,description:""},showLabel:{type:{name:"bool"},required:!1,description:""},loading:{type:{name:"bool"},required:!1,description:""},onSubmit:{type:{name:"func"},required:!1,description:""},disabled:{type:{name:"bool"},required:!1,description:""}}},ComponentSelectAccount.__docgenInfo={description:"",methods:[],displayName:"ComponentSelectAccount",props:{setup:{type:{name:"object"},required:!1,description:""},labelForm:{type:{name:"string"},required:!1,description:""},labelButton:{type:{name:"string"},required:!1,description:""},showLabel:{type:{name:"bool"},required:!1,description:""},loading:{type:{name:"bool"},required:!1,description:""},onSubmit:{type:{name:"func"},required:!1,description:""},disabled:{type:{name:"bool"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/google-shopping-settings/components/ComponentSelectAccount.js"]={name:"ComponentSelectAccount",docgenInfo:ComponentSelectAccount.__docgenInfo,path:"src/Drachma.Web/assets/react/views/google-shopping-settings/components/ComponentSelectAccount.js"})},2240:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(22),__webpack_require__(153);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),Loader=__webpack_require__(812),Block=__webpack_require__(148),useViewActive=__webpack_require__(2181),useLocale=__webpack_require__(239),ComponentViewHeader=__webpack_require__(460),GoogleShoppingSettingsContext=__webpack_require__(99),Text=(__webpack_require__(24),__webpack_require__(43)),Link=__webpack_require__(240),ComponentOverview=function(){var text=Object(useLocale.a)().text;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Text.a,{marginBottom:"0"},"".concat(text.google_ads_account_overview_1," ").concat(text.learn_more_about," "),react_default.a.createElement(Link.a,{label:"".concat(text.google_ads,"."),href:"https://ads.google.com/start",target:"_blank"})))};ComponentOverview.__docgenInfo={description:"",methods:[],displayName:"ComponentOverview"};var components_ComponentOverview=ComponentOverview;ComponentOverview.__docgenInfo={description:"",methods:[],displayName:"ComponentOverview"},ComponentOverview.__docgenInfo={description:"",methods:[],displayName:"ComponentOverview"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/google-shopping-settings/views/ads/components/ComponentOverview.js"]={name:"ComponentOverview",docgenInfo:ComponentOverview.__docgenInfo,path:"src/Drachma.Web/assets/react/views/google-shopping-settings/views/ads/components/ComponentOverview.js"});__webpack_require__(11),__webpack_require__(25),__webpack_require__(17),__webpack_require__(39),__webpack_require__(40),__webpack_require__(12),__webpack_require__(18);var defineProperty=__webpack_require__(2),defineProperty_default=__webpack_require__.n(defineProperty),slicedToArray=__webpack_require__(3),slicedToArray_default=__webpack_require__.n(slicedToArray),Button=__webpack_require__(67),useRequestSingle=__webpack_require__(2170),ComponentSelectAccount=__webpack_require__(2227);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}var ComponentStart=function(){var _useContext=Object(react.useContext)(GoogleShoppingSettingsContext.c),setupAds=_useContext.setupAds,apiAdsConnect=_useContext.apiAdsConnect,async=_useContext.async,handleAsync=_useContext.handleAsync,handleAdsAccountConnected=_useContext.handleAdsAccountConnected,handleAdsAccountConnectedId=_useContext.handleAdsAccountConnectedId,handleNotificationType=_useContext.handleNotificationType,handleNotificationMessage=_useContext.handleNotificationMessage,handleNotificationActive=_useContext.handleNotificationActive,handleModalErrorActive=_useContext.handleModalErrorActive,handleModalErrorMessage=_useContext.handleModalErrorMessage,apiAdsCreate=_useContext.apiAdsCreate,text=Object(useLocale.a)().text,handleViewActive=Object(react.useContext)(GoogleShoppingSettingsContext.a).handleViewActive,accountOptions=setupAds.accountOptions,handleRequestSingle=Object(useRequestSingle.a)().handleRequestSingle,_useState=Object(react.useState)({create:!1,connect:!1}),_useState2=slicedToArray_default()(_useState,2),loading=_useState2[0],setLoading=_useState2[1],hasAccountOptions=0<accountOptions.length,handleConnectAdsAccountSuccess=function(response){var data=response.data,feedback=response.feedback;if(setLoading(_objectSpread({},loading,{connect:!1})),handleAsync(!1),feedback)handleNotificationType("error"),handleNotificationMessage(feedback.message),handleNotificationActive();else{var adsId=data.adsId;handleViewActive({view:""}),handleAdsAccountConnected(!0),handleAdsAccountConnectedId(adsId),handleNotificationType("success"),handleNotificationMessage(text.google_ads_account_connect_notification_success),handleNotificationActive()}},handleConnectAdsAccountError=function(_ref){var errorMessage=_ref.errorMessage;handleAsync(!1),setLoading(_objectSpread({},loading,{connect:!1})),handleModalErrorMessage(errorMessage),handleModalErrorActive()},handleCreateAccountError=function(_ref2){var errorMessage=_ref2.errorMessage;handleAsync(!1),setLoading(_objectSpread({},loading,{create:!1})),handleModalErrorMessage(errorMessage),handleModalErrorActive()},handleCreateAccountSuccess=function(response){var adsId=response.data.adsId;handleAsync(!1),setLoading(_objectSpread({},loading,{create:!1})),handleAdsAccountConnected(!0),handleAdsAccountConnectedId(adsId),handleViewActive({view:"form"}),handleNotificationType("success"),handleNotificationMessage(text.google_ads_account_create_notification_success),handleNotificationActive()};return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Block.a,{padding:"4"},react_default.a.createElement(components_ComponentOverview,null)),hasAccountOptions&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Text.a,{strong:!0,label:text.use_existing_account,size:"base",marginBottom:"0",padding:"4",paddingBottom:"0",borderTop:!0}),react_default.a.createElement(Block.a,{paddingLeft:"4",paddingRight:"4",paddingBottom:"4"},react_default.a.createElement(ComponentSelectAccount.a,{setup:setupAds,onSubmit:function(event,id){setLoading(_objectSpread({},loading,{connect:!0})),handleAsync(!0),handleRequestSingle({url:apiAdsConnect,method:"post",params:{adsId:id},handleError:handleConnectAdsAccountError,handleSuccess:handleConnectAdsAccountSuccess}),event.preventDefault()},labelAccount:text.google_ads_account,labelForm:text.use_existing_account,labelButton:text.use_this_account,showLabel:!1,loading:loading.connect,disabled:async}))),react_default.a.createElement(Text.a,{strong:!0,label:text.create_new_account,size:"base",marginBottom:"0",padding:"4",paddingBottom:"0",borderTop:!0}),react_default.a.createElement(Block.a,{padding:"4"},react_default.a.createElement(Button.a,{label:text.google_ads_account_create,onClick:function(event){handleAsync(!0),setLoading(_objectSpread({},loading,{create:!0})),handleRequestSingle({url:apiAdsCreate,method:"get",handleError:handleCreateAccountError,handleSuccess:handleCreateAccountSuccess}),event.preventDefault()},disabled:async,appearance:"primary",loading:loading.create,onClickParam:!0,testId:"button-create-account"})))};ComponentStart.__docgenInfo={description:"",methods:[],displayName:"ComponentStart"};var components_ComponentStart=ComponentStart;ComponentStart.__docgenInfo={description:"",methods:[],displayName:"ComponentStart"},ComponentStart.__docgenInfo={description:"",methods:[],displayName:"ComponentStart"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/google-shopping-settings/views/ads/components/ComponentStart.js"]={name:"ComponentStart",docgenInfo:ComponentStart.__docgenInfo,path:"src/Drachma.Web/assets/react/views/google-shopping-settings/views/ads/components/ComponentStart.js"});var ComponentConfiguring=Object(react.lazy)((function(){return __webpack_require__.e(1).then(__webpack_require__.bind(null,2231))})),ComponentSetupMerchant=Object(react.lazy)((function(){return __webpack_require__.e(0).then(__webpack_require__.bind(null,2234))})),ComponentAccount=Object(react.lazy)((function(){return __webpack_require__.e(9).then(__webpack_require__.bind(null,2244))})),ComponentForm=Object(react.lazy)((function(){return __webpack_require__.e(12).then(__webpack_require__.bind(null,2232))})),ViewAds=function(){var _useContext=Object(react.useContext)(GoogleShoppingSettingsContext.c),adsAccountConnected=_useContext.adsAccountConnected,merchantAccountConnected=_useContext.merchantAccountConnected,merchantAccountComplete=_useContext.merchantAccountComplete,_useViewActive=Object(useViewActive.a)({view:adsAccountConnected?"form":"start"}),viewActive=_useViewActive.viewActive,handleViewActive=_useViewActive.handleViewActive,text=Object(useLocale.a)().text,loader=react_default.a.createElement(Loader.a,null);return react_default.a.createElement(GoogleShoppingSettingsContext.a.Provider,{value:{handleViewActive:handleViewActive,adsAccountConnected:adsAccountConnected}},react_default.a.createElement(ComponentViewHeader.a,{label:text.google_ads_account}),!merchantAccountConnected&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Block.a,{padding:"4",borderBottom:!0},react_default.a.createElement(components_ComponentOverview,null)),react_default.a.createElement(Block.a,{padding:"4"},react_default.a.createElement(react.Suspense,{fallback:loader},react_default.a.createElement(ComponentSetupMerchant,null)))),!merchantAccountComplete&&merchantAccountConnected&&react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Block.a,{padding:"4"},react_default.a.createElement(components_ComponentOverview,null)),react_default.a.createElement(Block.a,{padding:"4",paddingTop:"2"},react_default.a.createElement(react.Suspense,{fallback:loader},react_default.a.createElement(ComponentConfiguring,null)))),merchantAccountConnected&&adsAccountConnected&&react_default.a.createElement(react.Suspense,{fallback:loader},react_default.a.createElement(ComponentAccount,null)),merchantAccountComplete&&merchantAccountConnected&&!adsAccountConnected&&react_default.a.createElement(react.Suspense,{fallback:loader},"form"===viewActive&&react_default.a.createElement(ComponentForm,null),"start"===viewActive&&react_default.a.createElement(components_ComponentStart,null)))};__webpack_exports__.default=ViewAds;ViewAds.__docgenInfo={description:"",methods:[],displayName:"ViewAds"},ViewAds.__docgenInfo={description:"",methods:[],displayName:"ViewAds"}}}]);
//# sourceMappingURL=8.e2cdd4c89574bc1f32db.bundle.js.map