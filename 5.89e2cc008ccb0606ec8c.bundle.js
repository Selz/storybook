(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{2312:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(30);var prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(26),_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(110),_components__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(35),_components__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(51),_helpers__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(223),_helpers__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(926),_app_AppContext__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(28),_CheckoutContext__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(171),AddressCard=function(props){var label=props.label,user=props.user,address=props.address,handleAddressEdit=props.handleAddressEdit,shipping=props.shipping,locale=Object(react__WEBPACK_IMPORTED_MODULE_2__.useContext)(_app_AppContext__WEBPACK_IMPORTED_MODULE_9__.a).locale,theme=Object(react__WEBPACK_IMPORTED_MODULE_2__.useContext)(_CheckoutContext__WEBPACK_IMPORTED_MODULE_10__.c).theme,buttons=locale.buttons,firstName=user.firstName,lastName=user.lastName,addressOne=address.addressOne,addressTwo=address.addressTwo,city=address.city,state=address.state,zipcode=address.zipcode,country=address.country;return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_3__.a,{marginBottom:shipping?"2":"10",padding:"4",border:"all",borderRadius:"4"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_3__.a,{display:"grid",gridGap:"20",gridTemplateColumns:"repeat(2, 1fr)"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_3__.a,null,label&&react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_4__.a,{label:label,type:"5"}),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_5__.a,{label:"".concat(Object(_helpers__WEBPACK_IMPORTED_MODULE_7__.a)(firstName)," ").concat(Object(_helpers__WEBPACK_IMPORTED_MODULE_7__.a)(lastName)),marginBottom:"0",small:!0}),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_5__.a,{label:Object(_helpers__WEBPACK_IMPORTED_MODULE_8__.a)(addressOne),marginBottom:"0",small:!0}),addressTwo&&react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_5__.a,{label:Object(_helpers__WEBPACK_IMPORTED_MODULE_8__.a)(addressTwo),marginBottom:"0",small:!0}),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_5__.a,{label:"".concat(Object(_helpers__WEBPACK_IMPORTED_MODULE_8__.a)(city)," ").concat(state),marginBottom:"0",small:!0}),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_5__.a,{label:"".concat(zipcode," ").concat(Object(_helpers__WEBPACK_IMPORTED_MODULE_8__.a)(country)),marginBottom:"0",small:!0})),handleAddressEdit&&react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_3__.a,{textAlign:"right"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_6__.a,{label:buttons.change,onClick:function(){handleAddressEdit({shipping:shipping,billing:!shipping})},theme:theme,size:"small",padding:"0",faux:!0}))))};AddressCard.propTypes={label:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,shipping:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,address:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.shape({addressOne:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,addressTwo:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,city:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,state:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,zipcode:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,country:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string}),user:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.shape({firstName:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,lastName:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,email:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string}),handleAddressEdit:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func},AddressCard.__docgenInfo={description:"",methods:[],displayName:"AddressCard",props:{label:{type:{name:"string"},required:!1,description:""},shipping:{type:{name:"bool"},required:!1,description:""},address:{type:{name:"shape",value:{addressOne:{name:"string",required:!1},addressTwo:{name:"string",required:!1},city:{name:"string",required:!1},state:{name:"string",required:!1},zipcode:{name:"string",required:!1},country:{name:"string",required:!1}}},required:!1,description:""},user:{type:{name:"shape",value:{firstName:{name:"string",required:!1},lastName:{name:"string",required:!1},email:{name:"string",required:!1}}},required:!1,description:""},handleAddressEdit:{type:{name:"func"},required:!1,description:""}}},__webpack_exports__.a=AddressCard,AddressCard.__docgenInfo={description:"",methods:[],displayName:"AddressCard",props:{label:{type:{name:"string"},required:!1,description:""},shipping:{type:{name:"bool"},required:!1,description:""},address:{type:{name:"shape",value:{addressOne:{name:"string",required:!1},addressTwo:{name:"string",required:!1},city:{name:"string",required:!1},state:{name:"string",required:!1},zipcode:{name:"string",required:!1},country:{name:"string",required:!1}}},required:!1,description:""},user:{type:{name:"shape",value:{firstName:{name:"string",required:!1},lastName:{name:"string",required:!1},email:{name:"string",required:!1}}},required:!1,description:""},handleAddressEdit:{type:{name:"func"},required:!1,description:""}}},AddressCard.__docgenInfo={description:"",methods:[],displayName:"AddressCard",props:{label:{type:{name:"string"},required:!1,description:""},shipping:{type:{name:"bool"},required:!1,description:""},address:{type:{name:"shape",value:{addressOne:{name:"string",required:!1},addressTwo:{name:"string",required:!1},city:{name:"string",required:!1},state:{name:"string",required:!1},zipcode:{name:"string",required:!1},country:{name:"string",required:!1}}},required:!1,description:""},user:{type:{name:"shape",value:{firstName:{name:"string",required:!1},lastName:{name:"string",required:!1},email:{name:"string",required:!1}}},required:!1,description:""},handleAddressEdit:{type:{name:"func"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/checkout/components/address-card/AddressCard.js"]={name:"AddressCard",docgenInfo:AddressCard.__docgenInfo,path:"src/Drachma.Web/assets/react/views/checkout/components/address-card/AddressCard.js"})},2317:function(module,__webpack_exports__,__webpack_require__){"use strict";var slicedToArray=__webpack_require__(2),slicedToArray_default=__webpack_require__.n(slicedToArray);function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var hasPassiveEvents=!1;if("undefined"!=typeof window){var passiveTestOptions={get passive(){hasPassiveEvents=!0}};window.addEventListener("testPassive",null,passiveTestOptions),window.removeEventListener("testPassive",null,passiveTestOptions)}var isIosDevice="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),locks=[],documentListenerAdded=!1,initialClientY=-1,previousBodyOverflowSetting=void 0,previousBodyPaddingRight=void 0,allowTouchMove=function allowTouchMove(el){return locks.some((function(lock){return!(!lock.options.allowTouchMove||!lock.options.allowTouchMove(el))}))},preventDefault=function preventDefault(rawEvent){var e=rawEvent||window.event;return!!allowTouchMove(e.target)||(e.touches.length>1||(e.preventDefault&&e.preventDefault(),!1))},restoreOverflowSetting=function restoreOverflowSetting(){setTimeout((function(){void 0!==previousBodyPaddingRight&&(document.body.style.paddingRight=previousBodyPaddingRight,previousBodyPaddingRight=void 0),void 0!==previousBodyOverflowSetting&&(document.body.style.overflow=previousBodyOverflowSetting,previousBodyOverflowSetting=void 0)}))},disableBodyScroll=function disableBodyScroll(targetElement,options){if(isIosDevice){if(!targetElement)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(targetElement&&!locks.some((function(lock){return lock.targetElement===targetElement}))){var lock={targetElement:targetElement,options:options||{}};locks=[].concat(_toConsumableArray(locks),[lock]),targetElement.ontouchstart=function(event){1===event.targetTouches.length&&(initialClientY=event.targetTouches[0].clientY)},targetElement.ontouchmove=function(event){1===event.targetTouches.length&&function handleScroll(event,targetElement){var clientY=event.targetTouches[0].clientY-initialClientY;!allowTouchMove(event.target)&&(targetElement&&0===targetElement.scrollTop&&clientY>0||function isTargetElementTotallyScrolled(targetElement){return!!targetElement&&targetElement.scrollHeight-targetElement.scrollTop<=targetElement.clientHeight}(targetElement)&&clientY<0?preventDefault(event):event.stopPropagation())}(event,targetElement)},documentListenerAdded||(document.addEventListener("touchmove",preventDefault,hasPassiveEvents?{passive:!1}:void 0),documentListenerAdded=!0)}}else{!function setOverflowHidden(options){setTimeout((function(){if(void 0===previousBodyPaddingRight){var _reserveScrollBarGap=!!options&&!0===options.reserveScrollBarGap,scrollBarGap=window.innerWidth-document.documentElement.clientWidth;_reserveScrollBarGap&&scrollBarGap>0&&(previousBodyPaddingRight=document.body.style.paddingRight,document.body.style.paddingRight=scrollBarGap+"px")}void 0===previousBodyOverflowSetting&&(previousBodyOverflowSetting=document.body.style.overflow,document.body.style.overflow="hidden")}))}(options);var _lock={targetElement:targetElement,options:options||{}};locks=[].concat(_toConsumableArray(locks),[_lock])}},enableBodyScroll=function enableBodyScroll(targetElement){if(isIosDevice){if(!targetElement)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");targetElement.ontouchstart=null,targetElement.ontouchmove=null,locks=locks.filter((function(lock){return lock.targetElement!==targetElement})),documentListenerAdded&&0===locks.length&&(document.removeEventListener("touchmove",preventDefault,hasPassiveEvents?{passive:!1}:void 0),documentListenerAdded=!1)}else(locks=locks.filter((function(lock){return lock.targetElement!==targetElement}))).length||restoreOverflowSetting()},prop_types=__webpack_require__(1),prop_types_default=__webpack_require__.n(prop_types),react=__webpack_require__(0),react_default=__webpack_require__.n(react),Button=__webpack_require__(51),Block=__webpack_require__(26),Portal=__webpack_require__(354),Spring=__webpack_require__(2283),taggedTemplateLiteral=__webpack_require__(19),taggedTemplateLiteral_default=__webpack_require__.n(taggedTemplateLiteral),styled_components_browser_esm=__webpack_require__(20);function _templateObject(){var data=taggedTemplateLiteral_default()(["\n        position: ",";\n        top: 0;\n        left: 0;\n        width: 100vw;\n        height: 100vh;\n        background: rgba(46, 52, 61, 0.85);\n    "]);return _templateObject=function(){return data},data}var Overlay=function(props){var position=props.position,handleClick=props.handleClick,testId=props.testId,OverlayBackground=styled_components_browser_esm.b.div(_templateObject(),position);return react_default.a.createElement(OverlayBackground,{onClick:handleClick,"data-testid":testId})};Overlay.defaultProps={position:"fixed",testId:"overlay"},Overlay.propTypes={handleClick:prop_types_default.a.func,position:prop_types_default.a.string,testId:prop_types_default.a.string},Overlay.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{position:{defaultValue:{value:"'fixed'",computed:!1},type:{name:"string"},required:!1,description:""},testId:{defaultValue:{value:"'overlay'",computed:!1},type:{name:"string"},required:!1,description:""},handleClick:{type:{name:"func"},required:!1,description:""}}};var overlay_Overlay=Overlay;Overlay.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{position:{defaultValue:{value:"'fixed'",computed:!1},type:{name:"string"},required:!1,description:""},testId:{defaultValue:{value:"'overlay'",computed:!1},type:{name:"string"},required:!1,description:""},handleClick:{type:{name:"func"},required:!1,description:""}}},Overlay.__docgenInfo={description:"",methods:[],displayName:"Overlay",props:{position:{defaultValue:{value:"'fixed'",computed:!1},type:{name:"string"},required:!1,description:""},testId:{defaultValue:{value:"'overlay'",computed:!1},type:{name:"string"},required:!1,description:""},handleClick:{type:{name:"func"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/components/overlay/Overlay.js"]={name:"Overlay",docgenInfo:Overlay.__docgenInfo,path:"src/Drachma.Web/assets/react/components/overlay/Overlay.js"});var Icon=__webpack_require__(91),Panel=__webpack_require__(2265),AppContext=__webpack_require__(28),Cart=__webpack_require__(515),CheckoutContext=__webpack_require__(171),Text=__webpack_require__(35),useCurrency=__webpack_require__(2284),CartSummary=function(props){var handleShowCart=props.handleShowCart,total=props.total,locale=Object(react.useContext)(AppContext.a).locale,_useContext2=Object(react.useContext)(CheckoutContext.c),theme=_useContext2.theme,currency=_useContext2.currency,text=locale.text,handleCurrency=Object(useCurrency.a)(currency).handleCurrency;return react_default.a.createElement(Button.a,{position:"fixed",bottom:"0",left:"0",width:"100%",onClick:handleShowCart,theme:theme,zIndex:"10",faux:!0},react_default.a.createElement(Block.a,{display:"grid",gridTemplateColumns:"50% 50%",padding:"3",paddingLeft:"6",paddingRight:"6",zIndex:"1000",borderTopLeftRadius:"15px",borderTopRightRadius:"15px",boxShadow:"rgba(0, 0, 0, 0.1) 0 -1px 6px",background:"white",alignContent:"center",alignItems:"center"},react_default.a.createElement(Block.a,null,text.view_order_summary),react_default.a.createElement(Block.a,{textAlign:"right"},react_default.a.createElement(Text.a,{color:"gray-900",size:"xlarge",marginBottom:"0",strong:!0},handleCurrency(total)))))};CartSummary.defaultProps={},CartSummary.propTypes={total:prop_types_default.a.number,handleShowCart:prop_types_default.a.func},CartSummary.__docgenInfo={description:"",methods:[],displayName:"CartSummary",props:{total:{type:{name:"number"},required:!1,description:""},handleShowCart:{type:{name:"func"},required:!1,description:""}}};var cart_summary_CartSummary=CartSummary;CartSummary.__docgenInfo={description:"",methods:[],displayName:"CartSummary",props:{total:{type:{name:"number"},required:!1,description:""},handleShowCart:{type:{name:"func"},required:!1,description:""}}},CartSummary.__docgenInfo={description:"",methods:[],displayName:"CartSummary",props:{total:{type:{name:"number"},required:!1,description:""},handleShowCart:{type:{name:"func"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/checkout/components/cart-summary/CartSummary.js"]={name:"CartSummary",docgenInfo:CartSummary.__docgenInfo,path:"src/Drachma.Web/assets/react/views/checkout/components/cart-summary/CartSummary.js"});var Cart_Cart=function(props){var cartItemsData=props.cartItemsData,showEdit=props.showEdit,discount=props.discount,tax=props.tax,taxLoading=props.taxLoading,shipping=props.shipping,shippingLoading=props.shippingLoading,discountHeight=props.discountHeight,cartSummaryTotal=props.cartSummaryTotal,children=props.children,locale=Object(react.useContext)(AppContext.a).locale,_useContext2=Object(react.useContext)(CheckoutContext.c),theme=_useContext2.theme,setup=_useContext2.setup,tablet=_useContext2.tablet,apiCart=_useContext2.apiCart,viewPortHeight=_useContext2.viewPortHeight,displayCartTax=_useContext2.displayCartTax,displayCartShipping=_useContext2.displayCartShipping,_ref=Object(react.useContext)(CheckoutContext.b||CheckoutContext.a)||{},handleCartItemsUpdate=_ref.handleCartItemsUpdate,handleCartTotalUpdate=_ref.handleCartTotalUpdate,text=locale.text,buttons=locale.buttons,_useState=Object(react.useState)(!1),_useState2=slicedToArray_default()(_useState,2),showCart=_useState2[0],setShowCart=_useState2[1],ref=Object(react.useRef)(),handleHideCart=function(){setShowCart(!1)};Object(react.useEffect)((function(){showCart?disableBodyScroll(ref,{reserveScrollBarGap:!0}):enableBodyScroll(ref)}),[showCart]),Object(react.useEffect)((function(){tablet||(setShowCart(!1),enableBodyScroll(ref))}),[tablet]);var button=showEdit?react_default.a.createElement(Button.a,{label:buttons.edit_cart,href:"#",size:"small",padding:"0",theme:theme,faux:!0}):null;return react_default.a.createElement(Block.a,{marginBottom:"3",ref:ref},tablet&&react_default.a.createElement(cart_summary_CartSummary,{handleShowCart:function(){setShowCart(!0)},total:cartSummaryTotal}),react_default.a.createElement(Portal.a,{portal:tablet},tablet&&react_default.a.createElement(Spring.a,{active:showCart,animateOpacity:!0,noPointerEvents:!0},react_default.a.createElement(overlay_Overlay,{handleClick:handleHideCart,position:"absolute"}),react_default.a.createElement(Button.a,{onClick:handleHideCart,display:"block",position:"absolute",padding:"2",color:"white",textAlign:"center",marginTop:"2px",reset:!0,block:!0},react_default.a.createElement(Icon.a,{icon:"close",size:"small",marginRight:"1"}),"Close order summary")),react_default.a.createElement(Spring.a,{active:!tablet||showCart,preset:"stiff",animateTranslate3dY:tablet,animateOpacity:tablet,noPointerEvents:!0},react_default.a.createElement(Block.a,{position:tablet?"absolute":"relative",top:tablet?"50px":"0",left:tablet?"0":null,width:tablet?"100%":null,height:tablet?"100vh":null,background:"white",zIndex:"10",borderTopLeftRadius:tablet?"15px":"0",borderTopRightRadius:tablet?"15px":"0"},react_default.a.createElement(Panel.a,{header:text.order_summary,headerElements:button,borderRadius:"4",border:"all",background:"white"},react_default.a.createElement(Cart.a,{setup:JSON.stringify(setup),api:apiCart,cartItemsData:cartItemsData,discount:discount,shipping:shipping,shippingLoading:shippingLoading,tax:tax,taxLoading:taxLoading,viewPortHeight:viewPortHeight,reveal:tablet,revealOffset:discountHeight+120,onCartItemsUpdate:handleCartItemsUpdate,onCartTotalUpdate:handleCartTotalUpdate,displayShipping:displayCartShipping,displayTax:displayCartTax,mini:!0})),children))))};Cart_Cart.defaultProps={showEdit:!0},Cart_Cart.propTypes={cartItemsData:prop_types_default.a.array,cartSummaryTotal:prop_types_default.a.number,showEdit:prop_types_default.a.bool,tax:prop_types_default.a.object,taxLoading:prop_types_default.a.bool,shipping:prop_types_default.a.object,shippingLoading:prop_types_default.a.bool,discount:prop_types_default.a.object,discountHeight:prop_types_default.a.number,children:prop_types_default.a.node},Cart_Cart.__docgenInfo={description:"",methods:[],displayName:"Cart",props:{showEdit:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},cartItemsData:{type:{name:"array"},required:!1,description:""},cartSummaryTotal:{type:{name:"number"},required:!1,description:""},tax:{type:{name:"object"},required:!1,description:""},taxLoading:{type:{name:"bool"},required:!1,description:""},shipping:{type:{name:"object"},required:!1,description:""},shippingLoading:{type:{name:"bool"},required:!1,description:""},discount:{type:{name:"object"},required:!1,description:""},discountHeight:{type:{name:"number"},required:!1,description:""},children:{type:{name:"node"},required:!1,description:""}}};__webpack_exports__.a=Cart_Cart;Cart_Cart.__docgenInfo={description:"",methods:[],displayName:"Cart",props:{showEdit:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},cartItemsData:{type:{name:"array"},required:!1,description:""},cartSummaryTotal:{type:{name:"number"},required:!1,description:""},tax:{type:{name:"object"},required:!1,description:""},taxLoading:{type:{name:"bool"},required:!1,description:""},shipping:{type:{name:"object"},required:!1,description:""},shippingLoading:{type:{name:"bool"},required:!1,description:""},discount:{type:{name:"object"},required:!1,description:""},discountHeight:{type:{name:"number"},required:!1,description:""},children:{type:{name:"node"},required:!1,description:""}}},Cart_Cart.__docgenInfo={description:"",methods:[],displayName:"Cart",props:{showEdit:{defaultValue:{value:"true",computed:!1},type:{name:"bool"},required:!1,description:""},cartItemsData:{type:{name:"array"},required:!1,description:""},cartSummaryTotal:{type:{name:"number"},required:!1,description:""},tax:{type:{name:"object"},required:!1,description:""},taxLoading:{type:{name:"bool"},required:!1,description:""},shipping:{type:{name:"object"},required:!1,description:""},shippingLoading:{type:{name:"bool"},required:!1,description:""},discount:{type:{name:"object"},required:!1,description:""},discountHeight:{type:{name:"number"},required:!1,description:""},children:{type:{name:"node"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/checkout/components/cart/Cart.js"]={name:"Cart",docgenInfo:Cart_Cart.__docgenInfo,path:"src/Drachma.Web/assets/react/views/checkout/components/cart/Cart.js"})},2321:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(24),flattenIntoArray=__webpack_require__(2322),toObject=__webpack_require__(98),toLength=__webpack_require__(97),aFunction=__webpack_require__(150),arraySpeciesCreate=__webpack_require__(359);$({target:"Array",proto:!0},{flatMap:function flatMap(callbackfn){var A,O=toObject(this),sourceLen=toLength(O.length);return aFunction(callbackfn),(A=arraySpeciesCreate(O,0)).length=flattenIntoArray(A,O,O,sourceLen,0,1,callbackfn,arguments.length>1?arguments[1]:void 0),A}})},2322:function(module,exports,__webpack_require__){"use strict";var isArray=__webpack_require__(228),toLength=__webpack_require__(97),bind=__webpack_require__(201),flattenIntoArray=function(target,original,source,sourceLen,start,depth,mapper,thisArg){for(var element,targetIndex=start,sourceIndex=0,mapFn=!!mapper&&bind(mapper,thisArg,3);sourceIndex<sourceLen;){if(sourceIndex in source){if(element=mapFn?mapFn(source[sourceIndex],sourceIndex,original):source[sourceIndex],depth>0&&isArray(element))targetIndex=flattenIntoArray(target,original,element,toLength(element.length),targetIndex,depth-1)-1;else{if(targetIndex>=9007199254740991)throw TypeError("Exceed the acceptable array length");target[targetIndex]=element}targetIndex++}sourceIndex++}return targetIndex};module.exports=flattenIntoArray},2323:function(module,exports,__webpack_require__){__webpack_require__(280)("flatMap")},2334:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var slicedToArray=__webpack_require__(2),slicedToArray_default=__webpack_require__.n(slicedToArray),react=__webpack_require__(0),react_default=__webpack_require__.n(react),Block=__webpack_require__(26),Loader=__webpack_require__(269),Link=__webpack_require__(198),useRequestSingle=__webpack_require__(2252),CheckoutContext=__webpack_require__(171),Cart=__webpack_require__(2317),prop_types=__webpack_require__(1),prop_types_default=__webpack_require__.n(prop_types),AppContext=__webpack_require__(28),AddressCard=__webpack_require__(2312),Heading=__webpack_require__(110),Text=__webpack_require__(35),Account=__webpack_require__(516),CreateAccount=function(_ref){var user=_ref.user,locale=Object(react.useContext)(AppContext.a).locale,_useContext2=Object(react.useContext)(CheckoutContext.c),theme=_useContext2.theme,apiAccountCreate=_useContext2.apiAccountCreate,apiAccountLogin=_useContext2.apiAccountLogin,apiAccountPassword=_useContext2.apiAccountPassword,messages=locale.messages,text=locale.text,email=user.email;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Block.a,{marginBottom:"4"},react_default.a.createElement(Heading.a,{label:text.create_an_account,marginBottom:"2",size:"large"}),react_default.a.createElement(Text.a,{marginTop:"0",marginBottom:"1",small:!0,light:!0},messages.order_track_progress),react_default.a.createElement(Text.a,{marginBottom:"0",small:!0,light:!0},"".concat(text.username,": "),react_default.a.createElement("strong",null,email))),react_default.a.createElement(Account.a,{user:user,setup:JSON.stringify({view:"create"}),apiAccountCreate:apiAccountCreate,apiAccountLogin:apiAccountLogin,apiAccountPassword:apiAccountPassword,showHeader:!1,showFirstNameCreate:!1,showLastNameCreate:!1,showEmailCreate:!1,showButtonPassword:!0,theme:theme}))};CreateAccount.propTypes={user:prop_types_default.a.shape({firstName:prop_types_default.a.string,lastName:prop_types_default.a.string,email:prop_types_default.a.string})},CreateAccount.__docgenInfo={description:"",methods:[],displayName:"CreateAccount",props:{user:{type:{name:"shape",value:{firstName:{name:"string",required:!1},lastName:{name:"string",required:!1},email:{name:"string",required:!1}}},required:!1,description:""}}};var create_account_CreateAccount=CreateAccount;CreateAccount.__docgenInfo={description:"",methods:[],displayName:"CreateAccount",props:{user:{type:{name:"shape",value:{firstName:{name:"string",required:!1},lastName:{name:"string",required:!1},email:{name:"string",required:!1}}},required:!1,description:""}}},CreateAccount.__docgenInfo={description:"",methods:[],displayName:"CreateAccount",props:{user:{type:{name:"shape",value:{firstName:{name:"string",required:!1},lastName:{name:"string",required:!1},email:{name:"string",required:!1}}},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/checkout/views/complete/components/create-account/CreateAccount.js"]={name:"CreateAccount",docgenInfo:CreateAccount.__docgenInfo,path:"src/Drachma.Web/assets/react/views/checkout/views/complete/components/create-account/CreateAccount.js"});var Greeting=__webpack_require__(477),Header=__webpack_require__(754),defineProperty=(__webpack_require__(7),__webpack_require__(30),__webpack_require__(22),__webpack_require__(2321),__webpack_require__(16),__webpack_require__(88),__webpack_require__(13),__webpack_require__(68),__webpack_require__(2323),__webpack_require__(25),__webpack_require__(137),__webpack_require__(37),__webpack_require__(38),__webpack_require__(11),__webpack_require__(172),__webpack_require__(113),__webpack_require__(17),__webpack_require__(3)),defineProperty_default=__webpack_require__.n(defineProperty),toConsumableArray=__webpack_require__(77),toConsumableArray_default=__webpack_require__.n(toConsumableArray),Button=__webpack_require__(51),ListItem=__webpack_require__(356),Icon=__webpack_require__(91),List=__webpack_require__(274),Panel=__webpack_require__(2265),Tabs=__webpack_require__(932),TabsItem=__webpack_require__(2267),ButtonWithActions=__webpack_require__(474),ListCollapsible=__webpack_require__(475);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){defineProperty_default()(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}var EDownloadDisposition=Object.freeze({DOWNLOAD:0,STREAM:1,DOWNLOAD_AND_STREAM:2}),EDownloadItemAssetViewState=Object.freeze({FILES:0,LICENSES:1}),OrderDownloads=function(_ref){var orderDownloads=_ref.orderDownloads,locale=Object(react.useContext)(AppContext.a).locale,theme=Object(react.useContext)(CheckoutContext.c).theme,handleDownload=Object(react.useContext)(CheckoutContext.a).handleDownload,buttons=locale.buttons,text=locale.text,_useState=Object(react.useState)(Object.assign.apply(Object,[Object.create(null)].concat(toConsumableArray_default()(orderDownloads.map((function(_,index){return defineProperty_default()({},index,EDownloadItemAssetViewState.FILES)})))))),_useState2=slicedToArray_default()(_useState,2),downloadItemAssetViewStates=_useState2[0],setDownloadItemAssetViewStates=_useState2[1],handleDownloadAllLicenses=function(){engine.debug.log("ComponentOrderDownloads: handleDownloadAllLicenses.")},handleStreamFile=function(){engine.debug.log("ComponentOrderDownloads: handleStreamFile.")},handleDownloadFile=function(){engine.debug.log("ComponentOrderDownloads: handleDownloadFile."),handleDownload()},handleLicenseCopy=function(){engine.debug.log("ComponentOrderDownloads: handleLicenseCopy.")},bwaFileActions=[{actionLabel:buttons.save_to_computer,actionIcon:"small-circle-arrow-down",actionCallback:handleDownloadFile},{actionLabel:buttons.save_to_dropbox,actionIcon:"small-logo-dropbox",actionCallback:function(){engine.debug.log("ComponentOrderDownloads: handleSaveFileToDropbox.")}}],downloadListTabIsActive=function(downloadItemIndex,downloadItemAssetViewState){return downloadItemAssetViewStates[downloadItemIndex]===downloadItemAssetViewState},handleAssetTabClick=function(downloadItemIndex,downloadItemAssetViewState){setDownloadItemAssetViewStates(_objectSpread(_objectSpread({},downloadItemAssetViewStates),{},defineProperty_default()({},downloadItemIndex,downloadItemAssetViewState)))},renderItemFiles=function(itemFiles,parentIndex){var itemFileItems=itemFiles.map((function(file,index){var downloadDisposition=file.downloadDisposition,filename=file.filename,size=file.size;return react_default.a.createElement(ListItem.a,{key:"item-files-".concat(parentIndex,"-").concat(index),borderTop:0!==index||void 0},react_default.a.createElement(Block.a,{display:"flex",justifyContent:"space-between",padding:"3",paddingLeft:"4",paddingRight:"4"},react_default.a.createElement(Block.a,null,react_default.a.createElement(Text.a,{label:filename,marginBottom:"0"}),react_default.a.createElement(Text.a,{label:"".concat(size,"MB"),marginBottom:"0",color:"light",small:!0})),react_default.a.createElement(Block.a,{textAlign:"right"},function(downloadDisposition){switch(downloadDisposition){case EDownloadDisposition.STREAM:return react_default.a.createElement(Button.a,{appearance:"brand",theme:theme,label:buttons.play,onClick:handleStreamFile});case EDownloadDisposition.DOWNLOAD:return react_default.a.createElement(ButtonWithActions.a,{appearance:"brand",theme:theme,label:text.download,onClick:handleDownloadFile,actionData:bwaFileActions.slice(1,2)});case EDownloadDisposition.DOWNLOAD_AND_STREAM:return react_default.a.createElement(ButtonWithActions.a,{appearance:"brand",theme:theme,label:buttons.play,onClick:handleStreamFile,actionData:bwaFileActions});default:return react_default.a.createElement(Button.a,{appearance:"brand",theme:theme,label:"",onClick:null})}}(downloadDisposition))))}));return react_default.a.createElement(ListCollapsible.a,{collapsedStateLabel:buttons.show_all_of_type_format.format(text.files.toLowerCase()),nonCollapsedStateLabel:buttons.show_less,collapsedByDefault:!0,hasDivider:!0},itemFileItems)};return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Block.a,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"3"},react_default.a.createElement(Heading.a,{label:text.download_your_files,marginBottom:"3",size:"large"}),function(){var orderFilesDataArray=orderDownloads.map((function(data){return data.files}));if(0===orderFilesDataArray.length)return!1;var downloadDispositions=orderFilesDataArray.flatMap((function(fileData){return toConsumableArray_default()(fileData)})).map((function(fileData){return fileData.downloadDisposition}));return downloadDispositions.includes(EDownloadDisposition.DOWLOAD)||downloadDispositions.includes(EDownloadDisposition.DOWNLOAD_AND_STREAM)}()&&react_default.a.createElement(Button.a,{appearance:"plain",label:buttons.save_all_to_dropbox,onClick:function(){engine.debug.log("ComponentOrderDownloads: handleSaveAllToDropbox."),engine.debug.log(downloadItemAssetViewStates)},size:"small"},react_default.a.createElement(Icon.a,{icon:"small-logo-dropbox",size:"small"}))),react_default.a.createElement(List.a,{bullet:!1},orderDownloads&&orderDownloads.map((function(itemDownloads,index){var itemLicenses,parentIndex,itemLicensesItems,itemName=itemDownloads.itemName,files=itemDownloads.files,licenses=itemDownloads.licenses;return react_default.a.createElement(ListItem.a,{key:"item-downloads-parent-".concat(index)},react_default.a.createElement(Panel.a,{header:itemName,marginBottom:"3",borderRadius:"4",border:"all",background:"white"},0<licenses.length?react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Tabs.a,{display:"flex",isWrapped:!1,marginBottom:"0",padding:"0"},react_default.a.createElement(TabsItem.a,{flexGrow:"item-1",active:downloadListTabIsActive(index,EDownloadItemAssetViewState.FILES),label:text.files,onClick:function(){return handleAssetTabClick(index,EDownloadItemAssetViewState.FILES)}}),react_default.a.createElement(TabsItem.a,{flexGrow:"item-1",active:downloadListTabIsActive(index,EDownloadItemAssetViewState.LICENSES),label:text.licenses,onClick:function(){return handleAssetTabClick(index,EDownloadItemAssetViewState.LICENSES)}})),downloadListTabIsActive(index,EDownloadItemAssetViewState.FILES)&&renderItemFiles(files,index),downloadListTabIsActive(index,EDownloadItemAssetViewState.LICENSES)&&(parentIndex=index,itemLicensesItems=(itemLicenses=licenses).map((function(licenseKey,index){return react_default.a.createElement(ListItem.a,{key:"item-licenses-".concat(parentIndex,"-").concat(index),borderTop:0!==index||void 0},1<itemLicenses.length&&0===index&&react_default.a.createElement(Block.a,{padding:"3",paddingBottom:"0"},react_default.a.createElement(Button.a,{appearance:"plain",label:buttons.download_all_licenses,padding:"2",width:"100%",onClick:handleDownloadAllLicenses,size:"small"})),react_default.a.createElement(Block.a,{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"3",paddingLeft:"4",paddingRight:"4"},react_default.a.createElement(Text.a,{label:licenseKey,marginBottom:"0"}),react_default.a.createElement(Button.a,{appearance:"brand",theme:theme,label:buttons.copy,onClick:handleLicenseCopy})))})),react_default.a.createElement(ListCollapsible.a,{collapsedStateLabel:buttons.show_all_of_type_format.format(text.licenses.toLowerCase()),nonCollapsedStateLabel:buttons.show_less,collapsedByDefault:!0,hasDivider:!0},itemLicensesItems))):renderItemFiles(files,index)))}))))};OrderDownloads.propTypes={orderDownloads:prop_types_default.a.arrayOf(prop_types_default.a.shape({itemName:prop_types_default.a.string,files:prop_types_default.a.arrayOf(prop_types_default.a.shape({downloadDisposition:prop_types_default.a.oneOf(Object.values(EDownloadDisposition)),filename:prop_types_default.a.string,size:prop_types_default.a.number,url:prop_types_default.a.string})),licenses:prop_types_default.a.arrayOf(prop_types_default.a.string)}))},OrderDownloads.__docgenInfo={description:"",methods:[],displayName:"OrderDownloads",props:{orderDownloads:{type:{name:"arrayOf",value:{name:"shape",value:{itemName:{name:"string",required:!1},files:{name:"arrayOf",value:{name:"shape",value:{downloadDisposition:{name:"enum",computed:!0,value:"Object.values(EDownloadDisposition)",required:!1},filename:{name:"string",required:!1},size:{name:"number",required:!1},url:{name:"string",required:!1}}},required:!1},licenses:{name:"arrayOf",value:{name:"string"},required:!1}}}},required:!1,description:""}}};var order_downloads_OrderDownloads=OrderDownloads;OrderDownloads.__docgenInfo={description:"",methods:[],displayName:"OrderDownloads",props:{orderDownloads:{type:{name:"arrayOf",value:{name:"shape",value:{itemName:{name:"string",required:!1},files:{name:"arrayOf",value:{name:"shape",value:{downloadDisposition:{name:"enum",computed:!0,value:"Object.values(EDownloadDisposition)",required:!1},filename:{name:"string",required:!1},size:{name:"number",required:!1},url:{name:"string",required:!1}}},required:!1},licenses:{name:"arrayOf",value:{name:"string"},required:!1}}}},required:!1,description:""}}},OrderDownloads.__docgenInfo={description:"",methods:[],displayName:"OrderDownloads",props:{orderDownloads:{type:{name:"arrayOf",value:{name:"shape",value:{itemName:{name:"string",required:!1},files:{name:"arrayOf",value:{name:"shape",value:{downloadDisposition:{name:"enum",computed:!0,value:"Object.values(EDownloadDisposition)",required:!1},filename:{name:"string",required:!1},size:{name:"number",required:!1},url:{name:"string",required:!1}}},required:!1},licenses:{name:"arrayOf",value:{name:"string"},required:!1}}}},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/checkout/views/complete/components/order-downloads/OrderDownloads.js"]={name:"OrderDownloads",docgenInfo:OrderDownloads.__docgenInfo,path:"src/Drachma.Web/assets/react/views/checkout/views/complete/components/order-downloads/OrderDownloads.js"});var OrderInstructions=__webpack_require__(476),OrderConfirmed=function(_ref){var confirmationData=_ref.confirmationData,isAccountOrder=_ref.isAccountOrder,text=Object(react.useContext)(AppContext.a).locale.text,user=confirmationData.user,order=confirmationData.order,id=order.id,shippingAddress=order.shippingAddress,instructions=order.instructions,downloads=order.downloads,hasDownloads=order&&Array.isArray(downloads)&&0<downloads.length,hasInstructions=order&&Array.isArray(instructions)&&0<instructions.length;return react_default.a.createElement(Block.a,{marginBottom:"10"},react_default.a.createElement(Block.a,{marginBottom:"10"},react_default.a.createElement(Header.a,{orderId:id})),react_default.a.createElement(Block.a,{marginBottom:"10"},react_default.a.createElement(Greeting.a,{user:user,isDigital:hasDownloads})),hasInstructions&&react_default.a.createElement(Block.a,{marginBottom:"10"},react_default.a.createElement(OrderInstructions.a,{orderInstructions:instructions})),hasDownloads&&react_default.a.createElement(Block.a,{marginBottom:"10"},react_default.a.createElement(order_downloads_OrderDownloads,{orderDownloads:downloads})),!isAccountOrder&&react_default.a.createElement(Block.a,{marginBottom:"10"},react_default.a.createElement(create_account_CreateAccount,{user:user})),react_default.a.createElement(Block.a,{marginBottom:"10"},react_default.a.createElement(AddressCard.a,{label:text.shipping_address,address:shippingAddress,user:user})))};OrderConfirmed.propTypes={confirmationData:prop_types_default.a.shape({user:prop_types_default.a.shape({firstName:prop_types_default.a.string,lastName:prop_types_default.a.string,email:prop_types_default.a.string}),order:prop_types_default.a.shape({id:prop_types_default.a.string,items:prop_types_default.a.arrayOf(prop_types_default.a.shape({id:prop_types_default.a.string,title:prop_types_default.a.string,image:prop_types_default.a.string,price:prop_types_default.a.number,variants:prop_types_default.a.arrayOf(prop_types_default.a.string),qty:prop_types_default.a.number})),shippingAddress:prop_types_default.a.shape({addressOne:prop_types_default.a.string,addressTwo:prop_types_default.a.string,city:prop_types_default.a.string,state:prop_types_default.a.string,zipcode:prop_types_default.a.string,country:prop_types_default.a.string}),downloads:prop_types_default.a.arrayOf(prop_types_default.a.shape({itemName:prop_types_default.a.string,files:prop_types_default.a.arrayOf(prop_types_default.a.shape({filename:prop_types_default.a.string,size:prop_types_default.a.number,url:prop_types_default.a.string}))})),instructions:prop_types_default.a.arrayOf(prop_types_default.a.shape({itemName:prop_types_default.a.string,itemUrl:prop_types_default.a.string,htmlContent:prop_types_default.a.string}))})}),isAccountOrder:prop_types_default.a.bool},OrderConfirmed.__docgenInfo={description:"",methods:[],displayName:"OrderConfirmed",props:{confirmationData:{type:{name:"shape",value:{user:{name:"shape",value:{firstName:{name:"string",required:!1},lastName:{name:"string",required:!1},email:{name:"string",required:!1}},required:!1},order:{name:"shape",value:{id:{name:"string",required:!1},items:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!1},title:{name:"string",required:!1},image:{name:"string",required:!1},price:{name:"number",required:!1},variants:{name:"arrayOf",value:{name:"string"},required:!1},qty:{name:"number",required:!1}}},required:!1},shippingAddress:{name:"shape",value:{addressOne:{name:"string",required:!1},addressTwo:{name:"string",required:!1},city:{name:"string",required:!1},state:{name:"string",required:!1},zipcode:{name:"string",required:!1},country:{name:"string",required:!1}},required:!1},downloads:{name:"arrayOf",value:{name:"shape",value:{itemName:{name:"string",required:!1},files:{name:"arrayOf",value:{name:"shape",value:{filename:{name:"string",required:!1},size:{name:"number",required:!1},url:{name:"string",required:!1}}},required:!1}}},required:!1},instructions:{name:"arrayOf",value:{name:"shape",value:{itemName:{name:"string",required:!1},itemUrl:{name:"string",required:!1},htmlContent:{name:"string",required:!1}}},required:!1}},required:!1}}},required:!1,description:""},isAccountOrder:{type:{name:"bool"},required:!1,description:""}}};var order_confirmed_OrderConfirmed=OrderConfirmed;OrderConfirmed.__docgenInfo={description:"",methods:[],displayName:"OrderConfirmed",props:{confirmationData:{type:{name:"shape",value:{user:{name:"shape",value:{firstName:{name:"string",required:!1},lastName:{name:"string",required:!1},email:{name:"string",required:!1}},required:!1},order:{name:"shape",value:{id:{name:"string",required:!1},items:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!1},title:{name:"string",required:!1},image:{name:"string",required:!1},price:{name:"number",required:!1},variants:{name:"arrayOf",value:{name:"string"},required:!1},qty:{name:"number",required:!1}}},required:!1},shippingAddress:{name:"shape",value:{addressOne:{name:"string",required:!1},addressTwo:{name:"string",required:!1},city:{name:"string",required:!1},state:{name:"string",required:!1},zipcode:{name:"string",required:!1},country:{name:"string",required:!1}},required:!1},downloads:{name:"arrayOf",value:{name:"shape",value:{itemName:{name:"string",required:!1},files:{name:"arrayOf",value:{name:"shape",value:{filename:{name:"string",required:!1},size:{name:"number",required:!1},url:{name:"string",required:!1}}},required:!1}}},required:!1},instructions:{name:"arrayOf",value:{name:"shape",value:{itemName:{name:"string",required:!1},itemUrl:{name:"string",required:!1},htmlContent:{name:"string",required:!1}}},required:!1}},required:!1}}},required:!1,description:""},isAccountOrder:{type:{name:"bool"},required:!1,description:""}}},OrderConfirmed.__docgenInfo={description:"",methods:[],displayName:"OrderConfirmed",props:{confirmationData:{type:{name:"shape",value:{user:{name:"shape",value:{firstName:{name:"string",required:!1},lastName:{name:"string",required:!1},email:{name:"string",required:!1}},required:!1},order:{name:"shape",value:{id:{name:"string",required:!1},items:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!1},title:{name:"string",required:!1},image:{name:"string",required:!1},price:{name:"number",required:!1},variants:{name:"arrayOf",value:{name:"string"},required:!1},qty:{name:"number",required:!1}}},required:!1},shippingAddress:{name:"shape",value:{addressOne:{name:"string",required:!1},addressTwo:{name:"string",required:!1},city:{name:"string",required:!1},state:{name:"string",required:!1},zipcode:{name:"string",required:!1},country:{name:"string",required:!1}},required:!1},downloads:{name:"arrayOf",value:{name:"shape",value:{itemName:{name:"string",required:!1},files:{name:"arrayOf",value:{name:"shape",value:{filename:{name:"string",required:!1},size:{name:"number",required:!1},url:{name:"string",required:!1}}},required:!1}}},required:!1},instructions:{name:"arrayOf",value:{name:"shape",value:{itemName:{name:"string",required:!1},itemUrl:{name:"string",required:!1},htmlContent:{name:"string",required:!1}}},required:!1}},required:!1}}},required:!1,description:""},isAccountOrder:{type:{name:"bool"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/checkout/views/complete/components/order-confirmed/OrderConfirmed.js"]={name:"OrderConfirmed",docgenInfo:OrderConfirmed.__docgenInfo,path:"src/Drachma.Web/assets/react/views/checkout/views/complete/components/order-confirmed/OrderConfirmed.js"});var ViewComplete=function(){var _useContext=Object(react.useContext)(CheckoutContext.c),apiConfirmation=_useContext.apiConfirmation,setup=_useContext.setup,tablet=_useContext.tablet,locale=_useContext.locale,theme=_useContext.theme,handleAsync=_useContext.handleAsync,handleCallback=_useContext.handleCallback,messages=locale.messages,order=setup.order,user=setup.user,handleRequestSingle=Object(useRequestSingle.a)({handleAsync:handleAsync}).handleRequestSingle,_useState=Object(react.useState)(null),_useState2=slicedToArray_default()(_useState,2),confirmationData=_useState2[0],setConfirmationData=_useState2[1],_useState3=Object(react.useState)(!1),_useState4=slicedToArray_default()(_useState3,2),confirmationError=_useState4[0],setConfirmationError=_useState4[1],_useState5=Object(react.useState)(!1),_useState6=slicedToArray_default()(_useState5,2),confirmationLoading=_useState6[0],setConfirmationLoading=_useState6[1],_useState7=Object(react.useState)([]),_useState8=slicedToArray_default()(_useState7,2),cartItemsData=_useState8[0],setCartItemsData=_useState8[1],_useState9=Object(react.useState)(0),_useState10=slicedToArray_default()(_useState9,2),cartSummaryTotal=_useState10[0],setCartSummaryTotal=_useState10[1],_useState11=Object(react.useState)(""),_useState12=slicedToArray_default()(_useState11,2),discountCode=_useState12[0],setDiscountCode=_useState12[1],_useState13=Object(react.useState)({}),_useState14=slicedToArray_default()(_useState13,2),tax=_useState14[0],setTax=_useState14[1],_useState15=Object(react.useState)({}),_useState16=slicedToArray_default()(_useState15,2),shipping=_useState16[0],setShipping=_useState16[1],isAccountOrder=user&&user.hasCustomerAccount,handleConfirmationError=function(response){engine.debug.log("handleConfirmationError",response),setConfirmationError(!0),setConfirmationLoading(!1)},handleConfirmationSuccess=function(response){engine.debug.log("handleConfirmationSuccess",response);var data=response.data;handleCallback&&handleCallback(data),setConfirmationData(data),setConfirmationLoading(!1)},handleConfirmationData=function(){engine.debug.log("handleConfirmationData");var id=order.id;setConfirmationError(!1),setConfirmationLoading(!0),handleRequestSingle({url:apiConfirmation,data:{id:id},method:"post",handleError:handleConfirmationError,handleSuccess:handleConfirmationSuccess})};return Object(react.useEffect)((function(){confirmationData?setConfirmationData(confirmationData):handleConfirmationData()}),[]),Object(react.useEffect)((function(){setCartItemsData([{id:"item-1",title:"Item 1",image:"./images/product-shirt-purple.jpg",price:10,variants:["Large","Blue"],qty:3}]),setDiscountCode("HAPPY"),setCartSummaryTotal(200),setTax({taxLabel:"GST",taxValue:20}),setShipping({shippingLabel:"Standard (3-5 day)",shippingValue:0})}),[]),react_default.a.createElement(CheckoutContext.a.Provider,{value:{cartItemsData:cartItemsData,confirmationData:confirmationData,isAccountOrder:isAccountOrder,handleAccountCreate:function(){engine.debug.log("Create account")},handleConfirmationData:handleConfirmationData,handleDownload:function(){engine.debug.log("Download")}}},react_default.a.createElement(Block.a,{display:"grid",gridGap:"40",gridTemplateColumns:tablet?"1fr":"1fr  360px"},react_default.a.createElement(Block.a,null,(confirmationError?"There was an error loading your purchase confirmation.":confirmationLoading&&react_default.a.createElement(Loader.a,{size:""}))||confirmationData&&react_default.a.createElement(order_confirmed_OrderConfirmed,{confirmationData:confirmationData,isAccountOrder:isAccountOrder})),react_default.a.createElement(Block.a,null,react_default.a.createElement(Cart.a,{cartItemsData:cartItemsData,cartSummaryTotal:cartSummaryTotal,showEdit:!1,discountCode:discountCode,shipping:shipping,tax:tax}))),react_default.a.createElement(Link.a,{label:"< ".concat(messages.continue_shopping),theme:theme,faux:!0}))};ViewComplete.__docgenInfo={description:"",methods:[],displayName:"ViewComplete"};__webpack_exports__.default=ViewComplete;ViewComplete.__docgenInfo={description:"",methods:[],displayName:"ViewComplete"},ViewComplete.__docgenInfo={description:"",methods:[],displayName:"ViewComplete"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Drachma.Web/assets/react/views/checkout/views/complete/ViewComplete.js"]={name:"ViewComplete",docgenInfo:ViewComplete.__docgenInfo,path:"src/Drachma.Web/assets/react/views/checkout/views/complete/ViewComplete.js"})}}]);
//# sourceMappingURL=5.89e2cc008ccb0606ec8c.bundle.js.map